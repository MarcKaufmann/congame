(()=>{var t={1860:(t,e,n)=>{"use strict";n.r(e)},8711:(t,e,n)=>{"use strict";n.r(e)},4432:(t,e,n)=>{"use strict";n.r(e)},2065:(t,e,n)=>{"use strict";n.r(e)},35:(t,e,n)=>{"use strict";n.r(e)},5074:(t,e,n)=>{"use strict";n.r(e)},2811:()=>{up.browser={submitForm:function(t){t.submit()},canPushState:function(){return"GET"===up.protocol.initialRequestMethod()},canJQuery:function(){return!!window.jQuery},canEval:up.util.memoize((function(){try{return new Function("return true")()}catch{return!1}})),assertConfirmed:function(t){if(t.confirm&&!window.confirm(t.confirm))throw new up.Aborted("User canceled action");return!0},popCookie:function(t){let e=document.cookie.match(new RegExp(t+"=(\\w+)"))?.[1];if(e)return document.cookie=t+"=;Max-Age=0;Path=/",e}}},6346:()=>{const t=up.element;up.BodyShifter=class{constructor(){this.unshiftFns=[],this.reset()}reset(){this.unshiftNow(),this.shiftCount=0}shift(){if(this.shiftCount++,this.shiftCount>1)return;const e=up.viewport.rootHasReducedWidthFromScrollbar(),n=up.viewport.rootOverflowElement();if(this.changeStyle(n,{overflowY:"hidden"}),!e)return;const{body:r}=document,i=up.viewport.scrollbarWidth(),s=i+t.styleNumber(r,"paddingRight");this.changeStyle(r,{paddingRight:s});for(let e of up.viewport.anchoredRight()){const n=i+t.styleNumber(e,"right");this.changeStyle(e,{right:n})}}changeStyle(e,n){this.unshiftFns.push(t.setTemporaryStyle(e,n))}unshift(){this.shiftCount--,0==this.shiftCount&&this.unshiftNow()}unshiftNow(){let t;for(;t=this.unshiftFns.pop();)t()}}},7948:()=>{const t=up.util,e=up.element;up.Change.Addition=class extends up.Change{constructor(t){super(t),this.responseDoc=t.responseDoc,this.acceptLayer=t.acceptLayer,this.dismissLayer=t.dismissLayer,this.eventPlans=t.eventPlans||[],this.response=t.meta?.response}handleLayerChangeRequests(){this.layer.isOverlay()&&(this.tryAcceptLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryAcceptForLocation(this.responseOption()),this.abortWhenLayerClosed(),this.tryDismissLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryDismissForLocation(this.responseOption()),this.abortWhenLayerClosed()),this.layer.asCurrent((()=>{for(let t of this.eventPlans)up.emit({...t,...this.responseOption()}),this.abortWhenLayerClosed()}))}tryAcceptLayerFromServer(){t.isDefined(this.acceptLayer)&&this.layer.isOverlay()&&this.layer.accept(this.acceptLayer,this.responseOption())}tryDismissLayerFromServer(){t.isDefined(this.dismissLayer)&&this.layer.isOverlay()&&this.layer.dismiss(this.dismissLayer,this.responseOption())}abortWhenLayerClosed(t=this.layer){if(t.isClosed())throw new up.Aborted("Layer was closed")}setSource({oldElement:n,newElement:r,source:i}){"keep"===i&&(i=n&&up.fragment.source(n)),i&&e.setMissingAttr(r,"up-source",t.normalizeURL(i,{hash:!1}))}setTime({newElement:t,time:n}){e.setMissingAttr(t,"up-time",!!n&&n.toUTCString())}setETag({newElement:t,etag:n}){e.setMissingAttr(t,"up-etag",n||!1)}setReloadAttrs(t){this.setSource(t),this.setTime(t),this.setETag(t)}responseOption(){return{response:this.response}}}},3030:()=>{const t=up.util;up.Change=class{constructor(t){this.options=t}execute(){throw new up.NotImplemented}onFinished(t){return this.options.onFinished?.(t)}improveHistoryValue(e,n){return!1===e||t.isString(e)?e:n}deriveFailOptions(){return up.RenderOptions.deriveFailOptions(this.options)}}},7422:()=>{const t=up.util;up.Change.CloseLayer=class extends up.Change.Removal{constructor(t){super(t),this.verb=t.verb,this.layer=up.layer.get(t),this.origin=t.origin,this.value=t.value,this.preventable=t.preventable??!0,this.response=t.response,this.history=t.history??!0}execute(){if(!this.layer.isOpen())return Promise.resolve();if(up.browser.assertConfirmed(this.options),this.emitCloseEvent().defaultPrevented&&this.preventable)throw new up.Aborted("Close event was prevented");up.fragment.abort({reason:"Layer is closing",layer:this.layer});const{parent:t}=this.layer;this.layer.peel(),this.layer.stack.remove(this.layer),this.history&&t.restoreHistory(),this.handleFocus(t),this.layer.teardownHandlers(),this.layer.destroyElements(this.options),this.emitClosedEvent(t)}emitCloseEvent(){let e=this.layer.emit(this.buildEvent(`up:layer:${this.verb}`),{callback:this.layer.callback(`on${t.upperCaseFirst(this.verb)}`),log:[`Will ${this.verb} ${this.layer} with value %o`,this.value]});return this.value=e.value,e}emitClosedEvent(e){const n=`${this.verb}ed`,r=t.upperCaseFirst(n);return this.layer.emit(this.buildEvent(`up:layer:${n}`),{baseLayer:e,callback:this.layer.callback(`on${r}`),ensureBubbles:!0,log:[`${r} ${this.layer} with value %o`,this.value]})}buildEvent(t){return up.event.build(t,{layer:this.layer,value:this.value,origin:this.origin,response:this.response})}handleFocus(t){this.layer.overlayFocus.teardown(),t.overlayFocus?.moveToFront(),(this.layer.origin||t.element).focus({preventScroll:!0})}}},8228:()=>{up.Change.DestroyFragment=class extends up.Change.Removal{constructor(t){super(t),this.layer=up.layer.get(t)||up.layer.current,this.element=this.options.element,this.animation=this.options.animation,this.log=this.options.log}async execute(){this.parent=this.element.parentNode,up.fragment.markAsDestroying(this.element),up.motion.willAnimate(this.element,this.animation,this.options)?(this.emitDestroyed(),await this.animate(),this.wipe(),this.onFinished()):(this.wipe(),this.emitDestroyed(),this.onFinished())}animate(){return up.motion.animate(this.element,this.animation,this.options)}wipe(){this.layer.asCurrent((()=>{up.fragment.abort(this.element),up.syntax.clean(this.element,{layer:this.layer}),up.element.cleanJQuery(this.element),this.element.remove()}))}emitDestroyed(){up.fragment.emitDestroyed(this.element,{parent:this.parent,log:this.log})}}},9005:()=>{var t;const e=up.util;up.Change.FromContent=(t=class extends up.Change{constructor(t){super(t),this.layers=e.filter(up.layer.getAll(this.options),this.isRenderableLayer),this.origin=this.options.origin,this.preview=this.options.preview,this.mode=this.options.mode,this.origin&&(this.originLayer=up.layer.get(this.origin))}isRenderableLayer(t){return"new"===t||t.isOpen()}getPlans(){var t;let e=[];return this.options.fragment&&((t=this.options).target||(t.target=this.getResponseDoc().rootSelector())),this.expandIntoPlans(e,this.layers,this.options.target),this.expandIntoPlans(e,this.layers,this.options.fallback),e}expandIntoPlans(t,e,n){for(let r of e)for(let e of this.expandTargets(n,r)){const n={...this.options,target:e,layer:r,defaultPlacement:this.defaultPlacement()},i="new"===r?new up.Change.OpenLayer(n):new up.Change.UpdateLayer(n);t.push(i)}}expandTargets(t,e){return up.fragment.expandTargets(t,{layer:e,mode:this.mode,origin:this.origin})}execute(){return this.options.preload?Promise.resolve():this.seekPlan(this.executePlan.bind(this))||this.cannotMatchPostflightTarget()}executePlan(t){let e;try{return e=t.execute(this.getResponseDoc(),this.onPlanApplicable.bind(this,t)),e.options=this.options,this.executeHungry(t,e),e}catch(n){throw this.isApplicablePlanError(n)&&this.executeHungry(t,e),n}}isApplicablePlanError(t){return!(t instanceof up.CannotMatch)}executeHungry(t,e){if(!this.options.useHungry)return;let n=t.getHungrySteps(),r=new up.Change.UpdateSteps({steps:n}).execute(this.getResponseDoc());e&&e.fragments.push(...r.fragments)}onPlanApplicable(t){let e=this.getPlans()[0];t!==e&&up.puts("up.render()",'Could not match primary target "%s". Updating a fallback target "%s".',e.target,t.target)}getResponseDoc(){if(this.preview)return;const t=e.pick(this.options,["target","content","fragment","document","html","cspNonces","origin"]);return up.migrate.handleResponseDocOptions?.(t),"content"===this.defaultPlacement()&&(t.target=this.firstExpandedTarget(t.target)),new up.ResponseDoc(t)}defaultPlacement(){if(!this.options.document&&!this.options.fragment)return"content"}firstExpandedTarget(t){return this.expandTargets(t||":main",this.layers[0])[0]}getPreflightProps(t={}){return this.seekPlan((t=>t.getPreflightProps()))||t.optional||this.cannotMatchPreflightTarget()}cannotMatchPreflightTarget(){this.cannotMatchTarget("Could not find target in current page")}cannotMatchPostflightTarget(){this.cannotMatchTarget("Could not find common target in current page and response")}cannotMatchTarget(t){let n;throw n=this.getPlans().length?[t+" (tried selectors %o in %s)",e.uniq(e.map(this.getPlans(),"target")),up.layer.optionToString(this.options.layer)]:this.layers.length?this.options.failPrefixForced?"No target selector given for failed responses (https://unpoly.com/failed-responses)":"No target selector given":"Could not find a layer to render in. You may have passed a non-existing layer reference, or a detached element.",new up.CannotMatch(n)}seekPlan(t){for(let e of this.getPlans())try{return t(e)}catch(t){if(this.isApplicablePlanError(t))throw t}}},e.memoizeMethod(t.prototype,["getPlans","getResponseDoc","getPreflightProps"]),t)},278:()=>{var t;const e=up.util;up.Change.FromResponse=(t=class extends up.Change{constructor(t){super(t),this.response=t.response,this.request=this.response.request}execute(){if(up.fragment.config.skipResponse(this.loadedEventProps())?this.skip():this.request.assertEmitted("up:fragment:loaded",{...this.loadedEventProps(),callback:this.options.onLoaded,log:["Loaded fragment from %s",this.response.description],skip:()=>this.skip()}),e.evalOption(this.options.fail,this.response)??!this.response.ok)throw this.updateContentFromResponse(this.deriveFailOptions());return this.updateContentFromResponse(this.options)}skip(){up.puts("up.render()","Skipping "+this.response.description),this.options.target=":none",this.options.failTarget=":none"}updateContentFromResponse(t){t.failPrefixForced&&up.puts("up.render()","Rendering failed response using fail-prefixed options (https://unpoly.com/failed-responses)"),this.augmentOptionsFromResponse(t),t.meta=this.compilerPassMeta();let e=new up.Change.FromContent(t).execute();return e.finished=this.finish(e,t),e}async finish(t,e){return t=await t.finished,up.fragment.shouldRevalidate(this.request,this.response,e)&&(t=await this.revalidate(t,e)),t}async revalidate(t,e){let n=e.target;if(/:(before|after)/.test(n))up.warn("up.render()","Cannot revalidate cache when prepending/appending (target %s)",n);else{up.puts("up.render()",'Revalidating cached response for target "%s"',n);let r=await up.reload(t.target,{...e,layer:t.layer,onFinished:null,scroll:!1,focus:"keep",transition:!1,cache:!1,confirm:!1,feedback:!1,abort:!1,expiredResponse:this.response});r.none||(t=r)}return t}loadedEventProps(){const{expiredResponse:t}=this.options;return{request:this.request,response:this.response,renderOptions:this.options,revalidating:!!t,expiredResponse:t}}compilerPassMeta(){return e.pick(this.loadedEventProps(),["revalidating","response"])}augmentOptionsFromResponse(t){const n=this.response.url;let r=n,i=this.request.hash;i&&(t.hash=i,r+=i),"GET"===this.response.method?t.source=this.improveHistoryValue(t.source,n):(t.source=this.improveHistoryValue(t.source,"keep"),t.history=!!t.location),t.location=this.improveHistoryValue(t.location,r),t.title=this.improveHistoryValue(t.title,this.response.title),t.eventPlans=this.response.eventPlans;let s=this.response.target;s&&(t.target=s),t.acceptLayer=this.response.acceptLayer,t.dismissLayer=this.response.dismissLayer,t.document=this.response.text,this.response.none&&(t.target=":none"),t.context=e.merge(t.context,this.response.context),t.cspNonces=this.response.cspNonces,t.time??(t.time=this.response.lastModified),t.etag??(t.etag=this.response.etag)}},e.memoizeMethod(t.prototype,["loadedEventProps"]),t)},2200:()=>{var t;const e=up.util;up.Change.FromURL=(t=class extends up.Change{constructor(t){super(t),this.options.layer=up.layer.getAll(this.options),this.options.normalizeLayerOptions=!1}execute(){let t=this.newPageReason();return t?(up.puts("up.render()",t),up.network.loadPage(this.options),e.unresolvablePromise()):(this.request=up.request(this.getRequestAttrs()),this.options.onRequest?.(this.request),up.feedback.showAroundRequest(this.request,this.options),up.form.disableWhile(this.request,this.options),this.options.preload?this.request:e.always(this.request,(t=>this.onRequestSettled(t))))}newPageReason(){return e.isCrossOrigin(this.options.url)?"Loading cross-origin content in new page":up.browser.canPushState()?void 0:"Loading content in new page to restore history support"}getRequestAttrs(){const t=this.preflightPropsForRenderOptions(this.options),n=this.preflightPropsForRenderOptions(this.deriveFailOptions(),{optional:!0});return{...this.options,...t,...e.renameKeys(n,up.fragment.failKey)}}getPreflightProps(){return this.getRequestAttrs()}preflightPropsForRenderOptions(t,e){return new up.Change.FromContent({...t,preview:!0}).getPreflightProps(e)}onRequestSettled(t){return t instanceof up.Response?this.onRequestSettledWithResponse(t):this.onRequestSettledWithError(t)}onRequestSettledWithResponse(t){return new up.Change.FromResponse({...this.options,response:t}).execute()}onRequestSettledWithError(t){throw t instanceof up.Offline&&this.request.emit("up:fragment:offline",{callback:this.options.onOffline,renderOptions:this.options,retry:t=>up.render({...this.options,...t}),log:["Cannot load fragment from %s: %s",this.request.description,t.reason]}),t}},e.memoizeMethod(t.prototype,["getRequestAttrs"]),t)},7050:()=>{let t=up.util;up.Change.OpenLayer=class extends up.Change.Addition{constructor(t){super(t),this.target=t.target,this.origin=t.origin,this.baseLayer=t.baseLayer}getPreflightProps(){return{mode:this.options.mode,context:this.buildLayer().context,origin:this.options.origin,target:this.target,layer:this.baseLayer,fragments:t.compact([up.fragment.get(":main",{layer:this.baseLayer})])}}execute(t,e){if(":none"===this.target?this.content=document.createElement("up-none"):this.content=t.select(this.target),!this.content||this.baseLayer.isClosed())throw new up.CannotMatch;if(e(),up.puts("up.render()",`Opening element "${this.target}" in new overlay`),this.options.title=this.improveHistoryValue(this.options.title,t.getTitle()),this.emitOpenEvent().defaultPrevented)throw new up.Aborted("Open event was prevented");return this.layer=this.buildLayer(),this.baseLayer.peel({history:!this.layer.history}),up.layer.stack.push(this.layer),this.layer.createElements(this.content),this.layer.setupHandlers(),this.handleHistory(),this.setReloadAttrs({newElement:this.content,source:this.options.source}),t.finalizeElement(this.content),up.hello(this.layer.element,{...this.options,layer:this.layer}),this.handleLayerChangeRequests(),this.handleScroll(),this.renderResult=new up.RenderResult({layer:this.layer,fragments:[this.content],target:this.target}),this.renderResult.finished=this.finish(),this.layer.opening=!1,this.emitOpenedEvent(),this.abortWhenLayerClosed(),this.renderResult}async finish(){return await this.layer.startOpenAnimation(),this.abortWhenLayerClosed(),this.handleFocus(),this.renderResult}buildLayer(){const t={...this.options,opening:!0};return up.layer.build(t,(t=>this.options=up.RenderOptions.finalize(t)))}handleHistory(){"auto"===this.layer.history&&(this.layer.history=up.fragment.hasAutoHistory(this.content)),this.layer.parent.saveHistory(),this.layer.updateHistory(this.options)}handleFocus(){this.baseLayer.overlayFocus?.moveToBack(),this.layer.overlayFocus.moveToFront(),new up.FragmentFocus({fragment:this.content,layer:this.layer,autoMeans:["autofocus","layer"]}).process(this.options.focus)}handleScroll(){const t={...this.options,fragment:this.content,layer:this.layer,autoMeans:["hash","layer"]};new up.FragmentScrolling(t).process(this.options.scroll)}emitOpenEvent(){return up.emit("up:layer:open",{origin:this.origin,baseLayer:this.baseLayer,layerOptions:this.options,log:"Opening new overlay"})}emitOpenedEvent(){return this.layer.emit("up:layer:opened",{origin:this.origin,callback:this.layer.callback("onOpened"),log:`Opened new ${this.layer}`})}getHungrySteps(){return up.radio.hungrySteps({layer:null,history:this.layer&&this.layer.isHistoryVisible(),origin:this.options.origin})}}},1752:()=>{up.Change.Removal=class extends up.Change{}},9441:()=>{var t;const e=up.util;up.Change.UpdateLayer=(t=class extends up.Change.Addition{constructor(t){super(t=up.RenderOptions.finalize(t)),this.layer=t.layer,this.target=t.target,this.context=t.context,this.useKeep=t.useKeep,this.steps=up.fragment.parseTargetSteps(this.target,this.options)}getPreflightProps(){return this.matchPreflight(),{layer:this.layer,mode:this.layer.mode,context:e.merge(this.layer.context,this.context),origin:this.options.origin,target:this.bestPreflightSelector(),fragments:this.getFragments()}}bestPreflightSelector(){return this.matchPreflight(),up.fragment.targetForSteps(this.steps)}getFragments(){return this.matchPreflight(),e.map(this.steps,"oldElement")}execute(t,e){return this.responseDoc=t,this.matchPostflight(),e(),this.steps.length?up.puts("up.render()",`Updating "${this.bestPreflightSelector()}" in ${this.layer}`):up.puts("up.render()","Nothing was rendered"),this.options.title=this.improveHistoryValue(this.options.title,this.responseDoc.getTitle()),this.setScrollAndFocusOptions(),this.options.saveScroll&&up.viewport.saveScroll({layer:this.layer}),this.options.saveFocus&&up.viewport.saveFocus({layer:this.layer}),this.options.peel&&this.layer.peel({history:!this.hasHistory()}),!1!==this.options.abort&&up.fragment.abort(this.getFragments(),{reason:"Fragment is being replaced"}),Object.assign(this.layer.context,this.context),this.hasHistory()&&this.layer.updateHistory(this.options),this.handleLayerChangeRequests(),new up.Change.UpdateSteps({steps:this.steps,noneOptions:this.options}).execute(t)}matchPreflight(){this.steps=this.steps.filter((t=>{const e=new up.FragmentFinder(t);if(t.oldElement||(t.oldElement=e.find()),t.oldElement)return!0;if(!t.maybe)throw new up.CannotMatch})),this.steps=up.fragment.compressNestedSteps(this.steps)}matchPostflight(){this.matchPreflight(),this.steps=this.responseDoc.selectSteps(this.steps)}getHungrySteps(){return up.radio.hungrySteps({layer:this.layer,history:this.hasHistory(),origin:this.options.origin})}setScrollAndFocusOptions(){let t=up.FocusCapsule.preserve(this.layer);this.steps.forEach(((e,n)=>{e.focusCapsule=t,n>0&&(e.scroll=!1,e.focus=!1),"swap"!==e.placement&&"content"!==e.placement||(e.scrollBehavior="instant")}))}hasHistory(){return e.evalAutoOption(this.options.history,this.hasAutoHistory.bind(this))}hasAutoHistory(){const t=e.map(this.steps,"oldElement");return e.some(t,up.fragment.hasAutoHistory)}},e.memoizeMethod(t.prototype,["matchPreflight","matchPostflight","hasHistory"]),t)},9489:()=>{const t=up.util,e=up.element;up.Change.UpdateSteps=class extends up.Change.Addition{constructor(e){super(e),this.noneOptions=e.noneOptions||{},this.steps=t.copy(e.steps)}execute(t){if(this.responseDoc=t,this.steps=t.selectSteps(this.steps),!this.steps.length)return this.executeNone();this.renderResult=new up.RenderResult({layer:this.steps[0]?.layer,target:up.fragment.targetForSteps(this.steps)}),this.steps.reverse();const e=this.steps.map((t=>this.executeStep(t)));return this.renderResult.finished=this.finish(e),this.renderResult}executeNone(){return this.handleFocus(null,this.noneOptions),this.handleScroll(null,this.noneOptions),up.RenderResult.buildNone()}async finish(t){await Promise.all(t);for(let t of this.steps)this.abortWhenLayerClosed(t.layer);return this.renderResult}addToResult(t){let e=t.matches("up-wrapper")?t.children:[t];this.renderResult.fragments.unshift(...e)}executeStep(t){switch(this.setReloadAttrs(t),t.placement){case"swap":if(this.findKeepPlan(t))return this.handleFocus(t.oldElement,t),this.handleScroll(t.oldElement,t),Promise.resolve();{this.preserveKeepables(t);const e=t.oldElement.parentNode,n={...t,beforeStart(){up.fragment.markAsDestroying(t.oldElement)},afterInsert:()=>{this.responseDoc.finalizeElement(t.newElement),this.restoreKeepables(t),up.hello(t.newElement,t),this.addToResult(t.newElement)},beforeDetach:()=>{up.syntax.clean(t.oldElement,{layer:t.layer})},afterDetach(){up.element.cleanJQuery(),up.fragment.emitDestroyed(t.oldElement,{parent:e,log:!1})},scrollNew:()=>{this.handleFocus(t.newElement,t),this.handleScroll(t.newElement,t)}};return up.morph(t.oldElement,t.newElement,t.transition,n)}case"content":{let n=e.wrapChildren(t.oldElement),r=e.wrapChildren(t.newElement),i={...t,placement:"swap",oldElement:n,newElement:r,focus:!1};return this.executeStep(i).then((()=>{e.unwrap(r),this.handleFocus(t.oldElement,t)}))}case"before":case"after":{let n=e.wrapChildren(t.newElement),r="before"===t.placement?"afterbegin":"beforeend";return t.oldElement.insertAdjacentElement(r,n),this.responseDoc.finalizeElement(n),up.hello(n,t),this.addToResult(n),this.handleFocus(n,t),this.handleScroll(n,t),up.animate(n,t.transition,t).then((()=>e.unwrap(n)))}default:up.fail("Unknown placement: %o",t.placement)}}findKeepPlan(t){if(!t.useKeep)return;const{oldElement:n,newElement:r}=t;let i;if(!e.booleanAttr(n,"up-keep"))return;let s=up.fragment.toTarget(n);const o={layer:t.layer};if(i=t.descendantsOnly?up.fragment.get(r,s,o):up.fragment.subtree(r,s,o)[0],i&&e.booleanAttr(i,"up-keep")){const t={oldElement:n,newElement:i,newData:up.syntax.data(i)};if(!up.fragment.emitKeep(t).defaultPrevented)return t}}preserveKeepables(t){const e=[];if(t.useKeep)for(let n of t.oldElement.querySelectorAll("[up-keep]")){let r=this.findKeepPlan({...t,oldElement:n,descendantsOnly:!0});if(r){const t=n.cloneNode(!0);n.insertAdjacentElement("beforebegin",t);let i=up.viewport.subtree(r.oldElement);r.revivers=i.map((function(t){let e=up.viewport.copyCursorProps(t);return()=>up.viewport.copyCursorProps(e,t)})),this.willChangeElement(document.body)?r.newElement.replaceWith(n):document.body.append(n),e.push(r)}}t.keepPlans=e}restoreKeepables(t){for(let e of t.keepPlans){e.newElement.replaceWith(e.oldElement);for(let t of e.revivers)t()}}willChangeElement(e){return t.some(this.steps,(t=>t.oldElement.contains(e)))}handleFocus(t,e){return new up.FragmentFocus({...e,fragment:t,autoMeans:up.fragment.config.autoFocus}).process(e.focus)}handleScroll(t,e){return new up.FragmentScrolling({...e,fragment:t,autoMeans:up.fragment.config.autoScroll}).process(e.scroll)}}},1569:()=>{const t=up.util;up.CompilerPass=class{constructor(t,e,{layer:n,data:r,dataMap:i,meta:s}){n||(n=up.layer.get(t)||up.layer.current),this.root=t,this.compilers=e,this.layer=n,this.data=r,this.dataMap=i,this.meta={layer:n,...s},this.errors=[]}run(){if(this.layer.asCurrent((()=>{this.setCompileData();for(let t of this.compilers)this.runCompiler(t)})),this.errors.length)throw new up.CannotCompile("Errors while compiling",{errors:this.errors})}setCompileData(){if(this.data&&(this.root.upCompileData=this.data),this.dataMap)for(let t in this.dataMap)for(let e of this.select(t))e.upCompileData=this.dataMap[t]}runCompiler(t){const e=this.selectOnce(t);if(e.length){if(t.isDefault||up.puts("up.hello()",'Compiling %dÃ— "%s" on %s',e.length,t.selector,this.layer),t.batch)this.compileBatch(t,e);else for(let n of e)this.compileOneElement(t,n);return up.migrate.postCompile?.(e,t)}}compileOneElement(t,e){const n=[e];if(1!==t.length){const t=up.syntax.data(e);n.push(t,this.meta)}const r=this.applyCompilerFunction(t,e,n);let i=this.destructorPresence(r);i&&up.destructor(e,i)}compileBatch(e,n){const r=[n];if(1!==e.length){const e=t.map(n,up.syntax.data);r.push(e,this.meta)}const i=this.applyCompilerFunction(e,n,r);this.destructorPresence(i)&&up.fail("Compilers with { batch: true } cannot return destructors")}applyCompilerFunction(t,e,n){try{return t.apply(e,n)}catch(t){this.errors.push(t),up.log.error("up.hello()","While compiling %o: %o",e,t)}}destructorPresence(e){if(t.isFunction(e)||t.isArray(e)&&t.every(e,t.isFunction))return e}select(e){return up.fragment.subtree(this.root,t.evalOption(e),{layer:this.layer})}selectOnce(e){let n=this.select(e.selector);return t.filter(n,(t=>{let n=t.upAppliedCompilers||(t.upAppliedCompilers=new Set);if(!n.has(e))return n.add(e),!0}))}}},3742:()=>{up.Config=class{constructor(t=(()=>({}))){this.blueprintFn=t,this.reset()}reset(){Object.assign(this,this.blueprintFn())}}},2737:()=>{const t=up.util,e=up.element;up.CSSTransition=class{constructor(e,n,r){this.element=e,this.lastFrameKebab=n,this.lastFrameKeysKebab=Object.keys(this.lastFrameKebab),t.some(this.lastFrameKeysKebab,(t=>t.match(/A-Z/)))&&up.fail("Animation keys must be kebab-case"),this.finishEvent=r.finishEvent,this.duration=r.duration,this.easing=r.easing,this.finished=!1}start(){return 0===this.lastFrameKeysKebab.length?(this.finished=!0,Promise.resolve()):(this.deferred=t.newDeferred(),this.pauseOldTransition(),this.startTime=new Date,this.startFallbackTimer(),this.listenToFinishEvent(),this.listenToTransitionEnd(),this.startMotion(),this.deferred)}listenToFinishEvent(){this.finishEvent&&(this.stopListenToFinishEvent=up.on(this.element,this.finishEvent,this.onFinishEvent.bind(this)))}onFinishEvent(t){t.stopPropagation(),this.finish()}startFallbackTimer(){this.fallbackTimer=t.timer(this.duration+100,(()=>{this.finish()}))}stopFallbackTimer(){clearTimeout(this.fallbackTimer)}listenToTransitionEnd(){this.stopListenToTransitionEnd=up.on(this.element,"transitionend",this.onTransitionEnd.bind(this))}onTransitionEnd(e){if(e.target!==this.element)return;if(new Date-this.startTime<=.25*this.duration)return;const n=e.propertyName;t.contains(this.lastFrameKeysKebab,n)&&this.finish()}finish(){this.finished||(this.finished=!0,this.stopFallbackTimer(),this.stopListenToFinishEvent?.(),this.stopListenToTransitionEnd?.(),e.concludeCSSTransition(this.element),this.resumeOldTransition(),this.deferred.resolve())}pauseOldTransition(){const t=e.style(this.element,["transitionProperty","transitionDuration","transitionDelay","transitionTimingFunction"]);if(e.hasCSSTransition(t)){if("all"!==t.transitionProperty){const n=t.transitionProperty.split(/\s*,\s*/),r=e.style(this.element,n);this.setOldTransitionTargetFrame=e.setTemporaryStyle(this.element,r)}this.setOldTransition=e.concludeCSSTransition(this.element)}}resumeOldTransition(){this.setOldTransitionTargetFrame?.(),this.setOldTransition?.()}startMotion(){e.setStyle(this.element,{transitionProperty:Object.keys(this.lastFrameKebab).join(", "),transitionDuration:`${this.duration}ms`,transitionTimingFunction:this.easing}),e.setStyle(this.element,this.lastFrameKebab)}}},3635:()=>{const t=up.util;up.DestructorPass=class{constructor(t,e){this.fragment=t,this.options=e,this.errors=[]}run(){for(let e of this.selectCleanables()){let n=t.pluckKey(e,"upDestructors");if(n)for(let t of n)this.applyDestructorFunction(t,e);e.classList.remove("up-can-clean")}if(this.errors.length)throw new up.Error("Errors while destroying",{errors:this.errors})}selectCleanables(){const t={...this.options,destroying:!0};return up.fragment.subtree(this.fragment,".up-can-clean",t)}applyDestructorFunction(t,e){try{t()}catch(t){this.errors.push(t),up.log.error("up.destroy()","While destroying %o: %o",e,t)}}}},1906:()=>{const t=up.util,e=up.element;up.EventEmitter=class extends up.Record{keys(){return["target","event","baseLayer","callback","log","ensureBubbles"]}emit(){return this.logEmission(),this.baseLayer?this.baseLayer.asCurrent((()=>this.dispatchEvent())):this.dispatchEvent(),this.event}dispatchEvent(){this.target.dispatchEvent(this.event),this.ensureBubbles&&!this.target.isConnected&&document.dispatchEvent(this.event),this.callback?.(this.event)}assertEmitted(){const t=this.emit();if(t.defaultPrevented)throw new up.Aborted(`Event ${t.type} was prevented`)}logEmission(){if(!up.log.config.enabled)return;let e,n=this.log;t.isArray(n)?[n,...e]=n:e=[];const{type:r}=this.event;t.isString(n)?up.puts(r,n,...e):!1!==n&&up.puts(r,`Event ${r}`)}static fromEmitArgs(n,r={}){let i,s=t.extractOptions(n);return s=t.merge(r,s),t.isElementish(n[0])?s.target=e.get(n.shift()):n[0]instanceof up.Layer&&(s.layer=n.shift()),t.isGiven(s.layer)&&(i=up.layer.get(s.layer),s.target||(s.target=i.element),s.baseLayer||(s.baseLayer=i)),s.baseLayer&&(s.baseLayer=up.layer.get(s.baseLayer)),t.isString(s.target)?s.target=up.fragment.get(s.target,{layer:s.layer}):s.target||(s.target=document),n[0]?.preventDefault?(s.event=n[0],s.log??(s.log=n[0].log)):t.isString(n[0])?s.event=up.event.build(n[0],s):s.event=up.event.build(s),new this(s)}}},4158:()=>{const t=up.util;up.EventListener=class extends up.Record{keys(){return["element","eventType","selector","callback","guard","baseLayer","passive","once","beforeBoot"]}constructor(t){super(t),this.key=this.constructor.buildKey(t),this.isDefault=up.framework.evaling,this.beforeBoot??(this.beforeBoot=0===this.eventType.indexOf("up:framework:")),this.nativeCallback=this.nativeCallback.bind(this)}bind(){var t;const e=(t=this.element).upEventListeners||(t.upEventListeners={});e[this.key]&&up.fail("up.on(): The %o callback %o cannot be registered more than once",this.eventType,this.callback),e[this.key]=this,this.element.addEventListener(...this.addListenerArgs())}addListenerArgs(){let e=t.compactObject(t.pick(this,["once","passive"]));return[this.eventType,this.nativeCallback,e]}unbind(){let t=this.element.upEventListeners;t&&delete t[this.key],this.element.removeEventListener(...this.addListenerArgs())}nativeCallback(e){if(up.framework.beforeBoot&&!this.beforeBoot)return;let n=e.target;if(this.selector&&(n=n.closest(t.evalOption(this.selector))),(!this.guard||this.guard(e))&&n){const t=[e,n],r=this.callback.length;if(1!==r&&2!==r){const e=up.syntax.data(n);t.push(e)}if("click"===this.eventType&&n.disabled)return;const i=this.callback.bind(n,...t);this.baseLayer?this.baseLayer.asCurrent(i):i()}}static fromElement(t){let e=t.element.upEventListeners;if(e)return e[this.buildKey(t)]}static buildKey(e){var n;return(n=e.callback).upUid||(n.upUid=t.uid()),[e.eventType,e.selector,e.callback.upUid].join("|")}static allNonDefault(e){let n=e.upEventListeners;if(n){const e=Object.values(n);return t.reject(e,"isDefault")}return[]}}},3139:()=>{const t=up.util;up.EventListenerGroup=class extends up.Record{keys(){return["elements","eventTypes","selector","callback","guard","baseLayer","passive","once","beforeBoot"]}bind(){const e=[];return this.eachListenerAttributes((function(t){const n=new up.EventListener(t);return n.bind(),e.push(n.unbind.bind(n))})),t.sequence(e)}eachListenerAttributes(t){for(let e of this.elements)for(let n of this.eventTypes)t(this.listenerAttributes(e,n))}listenerAttributes(t,e){return{...this.attributes(),element:t,eventType:e}}unbind(){this.eachListenerAttributes((function(t){let e=up.EventListener.fromElement(t);e&&e.unbind()}))}static fromBindArgs(e,n){const r=(e=t.copy(e)).pop();let i;i=e[0].addEventListener?[e.shift()]:t.isJQuery(e[0])||t.isList(e[0])&&e[0][0].addEventListener?e.shift():[document];let s=t.parseTokens(e.shift()),o=up.migrate.fixEventTypes;o&&(s=o(s));const a=t.extractOptions(e);return new this({elements:i,eventTypes:s,selector:e[0],callback:r,...a,...n})}}},2214:()=>{const t=up.util;up.FieldWatcher=class{constructor(t,e,n,r){this.callback=r,this.form=t,this.fields=e,this.options=n,this.batch=n.batch,this.unbindFns=[]}fieldOptions(e){let n=t.copy(this.options);return up.form.watchOptions(e,n,{defaults:{event:"input"}})}start(){this.scheduledValues=null,this.processedValues=this.readFieldValues(),this.currentTimer=null,this.callbackRunning=!1;for(let t of this.fields)this.watchField(t)}watchField(t){let e=this.fieldOptions(t);this.unbindFns.push(up.on(t,e.event,(t=>this.check(t,e)))),this.unbindFns.push(up.fragment.onAborted(t,(()=>this.cancelTimer())))}stop(){for(let t of this.unbindFns)t();this.cancelTimer()}cancelTimer(){clearTimeout(this.currentTimer),this.currentTimer=null}isAnyFieldAttached(){return t.some(this.fields,"isConnected")}scheduleValues(e,n,r){this.cancelTimer(),this.scheduledValues=e;let i=t.evalOption(r.delay,n);this.currentTimer=t.timer(i,(()=>{this.currentTimer=null,this.isAnyFieldAttached()?(this.scheduledFieldOptions=r,this.requestCallback()):this.scheduledValues=null}))}isNewValues(e){return!t.isEqual(e,this.processedValues)&&!t.isEqual(this.scheduledValues,e)}async requestCallback(){let e=this.scheduledFieldOptions;if(null!==this.scheduledValues&&!this.currentTimer&&!this.callbackRunning){const n=this.changedValues(this.processedValues,this.scheduledValues);this.processedValues=this.scheduledValues,this.scheduledValues=null,this.callbackRunning=!0,this.scheduledFieldOptions=null;let r={...e,disable:!1};const i=[];if(this.batch)i.push(this.callback(n,r));else for(let t in n){const e=n[t];i.push(this.callback(e,t,r))}if(t.some(i,t.isPromise)){let t=Promise.allSettled(i);up.form.disableWhile(t,e),await t}this.callbackRunning=!1,this.requestCallback()}}changedValues(e,n){const r={};let i=Object.keys(e);i=i.concat(Object.keys(n)),i=t.uniq(i);for(let s of i){const i=e[s],o=n[s];t.isEqual(i,o)||(r[s]=o)}return r}readFieldValues(){return up.Params.fromFields(this.fields).toObject()}check(t,e){const n=this.readFieldValues();this.isNewValues(n)&&this.scheduleValues(n,t,e)}}},5949:()=>{const t=up.util;up.FIFOCache=class{constructor({capacity:e=10,normalizeKey:n=t.identity}={}){this.map=new Map,this.capacity=e,this.normalizeKey=n}get(t){return t=this.normalizeKey(t),this.map.get(t)}set(t,e){if(this.map.size===this.capacity){let t=this.map.keys().next().value;this.map.delete(t)}t=this.normalizeKey(t),this.map.set(t,e)}clear(){this.map.clear()}}},665:()=>{up.FocusCapsule=class{constructor(t,e){this.target=t,this.cursorProps=e}restore(t,e){let n=up.fragment.get(this.target,{layer:t});if(n)return up.viewport.copyCursorProps(this.cursorProps,n),up.focus(n,e),!0}static preserve(t){let e=up.viewport.focusedElementWithin(t.element);if(!e)return;let n=up.fragment.tryToTarget(e);return n?new this(n,up.viewport.copyCursorProps(e)):void 0}}},5240:()=>{const t=up.util;up.FormValidator=class{constructor(t){this.form=t,this.dirtySolutions=[],this.nextRenderTimer=null,this.rendering=!1,this.resetNextRenderPromise(),this.honorAbort()}honorAbort(){up.fragment.onAborted(this.form,{around:!0},(({target:t})=>this.unscheduleSolutionsWithin(t)))}unscheduleSolutionsWithin(e){this.dirtySolutions=t.reject(this.dirtySolutions,(({element:t})=>e.contains(t)))}resetNextRenderPromise(){this.nextRenderPromise=t.newDeferred()}watchContainer(t){let{event:e}=this.originOptions(t);up.on(t,e,{guard:()=>up.fragment.isAlive(t)},(()=>up.error.muteUncriticalRejection(this.validate({origin:t}))))}validate(t={}){let e=this.getSolutions(t);return this.dirtySolutions.push(...e),this.scheduleNextRender(),this.nextRenderPromise}getSolutions(t){let e=this.getTargetSelectorSolutions(t)||this.getFieldSolutions(t)||this.getElementSolutions(t.origin);for(let n of e)n.renderOptions=this.originOptions(n.origin,t),n.target=up.fragment.resolveOrigin(n.target,n);return e}getFieldSolutions({origin:t,...e}){if(up.form.isField(t))return this.getValidateAttrSolutions(t)||this.getFormGroupSolutions(t,e)}getFormGroupSolutions(t,{formGroup:e=!0}){if(!e)return;let n=up.form.groupSolution(t);return n?(up.puts("up.validate()","Validating form group of field %o",t),[n]):void 0}getTargetSelectorSolutions({target:e,origin:n}){if(t.isString(e)&&e){up.puts("up.validate()",'Validating target "%s"',e);let r=up.fragment.splitTarget(e);return t.compact(r.map((function(t){let e=up.fragment.get(t,{origin:n});if(e)return{element:e,target:t,origin:n};up.fail('Validation target "%s" does not match an element',t)})))}}getElementSolutions(t){return up.puts("up.validate()","Validating element %o",t),[{element:t,target:up.fragment.toTarget(t),origin:t}]}getValidateAttrSolutions(t){let e=t.closest("[up-validate]");if(e){let n=e.getAttribute("up-validate");return this.getTargetSelectorSolutions({target:n,origin:t})}}originOptions(t,e){return up.form.watchOptions(t,e,{defaults:{event:"change"}})}scheduleNextRender(){let e=this.dirtySolutions.map((t=>t.renderOptions.delay)),n=Math.min(...e)||0;this.unscheduleNextRender(),this.nextRenderTimer=t.timer(n,(()=>this.renderDirtySolutions()))}unscheduleNextRender(){clearTimeout(this.nextRenderTimer)}renderDirtySolutions(){up.error.muteUncriticalRejection(this.doRenderDirtySolutions())}async doRenderDirtySolutions(){if(this.dirtySolutions=t.filter(this.dirtySolutions,(({element:t,origin:e})=>up.fragment.isAlive(t)&&up.fragment.isAlive(e))),!this.dirtySolutions.length||this.rendering)return;let e=this.dirtySolutions;this.dirtySolutions=[];let n=t.map(e,"origin"),r=t.flatMap(n,up.form.fields),i=t.uniq(t.map(r,"name")),s=this.buildDataMap(e),o=t.map(e,"renderOptions"),a=t.mergeDefined(...o,{dataMap:s},up.form.destinationOptions(this.form));a.target=t.map(e,"target").join(", "),a.feedback=t.some(o,"feedback"),a.origin=this.form,a.focus??(a.focus="keep"),a.failOptions=!1,a.params=up.Params.merge(a.params,...t.map(o,"params")),a.headers=t.merge(...t.map(o,"headers")),a.headers[up.protocol.headerize("validate")]=i.join(" ")||":unknown",a.guardEvent=up.event.build("up:form:validate",{fields:r,log:"Validating form",params:a.params}),this.rendering=!0;let u=this.nextRenderPromise;this.resetNextRenderPromise(),a.disable=!1;for(let t of e)up.form.disableWhile(u,{disable:t.renderOptions.disable,origin:t.origin});try{u.resolve(up.render(a)),await u}finally{this.rendering=!1,this.renderDirtySolutions()}}buildDataMap(e){let n={};for(let r of e){let e=t.pluckKey(r.renderOptions,"data");t.pluckKey(r.renderOptions,"keepData")&&(e=up.data(r.element)),e&&(n[r.target]=e)}return n}static forElement(t){let e=up.form.get(t);return e.upFormValidator||(e.upFormValidator=new this(e))}}},2587:()=>{const t=/^([^ >+(]+) (.+)$/;up.FragmentFinder=class{constructor(t){this.options=t,this.origin=t.origin,this.selector=t.selector,this.externalRoot=t.externalRoot}find(){return this.findAroundOrigin()||this.findInLayer()}findAroundOrigin(){if(this.origin&&up.fragment.config.matchAroundOrigin&&this.origin.isConnected)return this.findClosest()||this.findInVicinity()}findClosest(){return up.fragment.closest(this.origin,this.selector,this.options)}findInVicinity(){let e=this.selector.match(t);if(e){let t=up.fragment.closest(this.origin,e[1],this.options);if(t)return up.fragment.getDumb(t,e[2])}}findInLayer(){return this.externalRoot?up.fragment.subtree(this.externalRoot,this.selector,this.options)[0]:up.fragment.getDumb(this.selector,this.options)}}},7031:()=>{const t=up.util,e=up.element,n={preventScroll:!0};up.FragmentFocus=class extends up.FragmentProcessor{keys(){return super.keys().concat(["hash","focusCapsule"])}processPrimitive(e){switch(e){case"keep":return this.restoreLostFocus();case"restore":return this.restorePreviousFocusForLocation();case"target":case!0:return this.focusElement(this.fragment);case"layer":return this.focusElement(this.layer.getFocusElement());case"main":return this.focusSelector(":main");case"hash":return this.focusHash();case"autofocus":return this.autofocus();default:if(t.isString(e))return this.focusSelector(e)}}processElement(t){return this.focusElement(t)}resolveCondition(t){return"lost"===t?this.wasFocusLost():super.resolveCondition(t)}focusSelector(t){let e=this.findSelector(t);return this.focusElement(e)}restoreLostFocus(){if(this.wasFocusLost())return this.focusCapsule?.restore(this.layer,n)}restorePreviousFocusForLocation(){return up.viewport.restoreFocus({layer:this.layer})}autofocus(){let t=this.fragment&&e.subtree(this.fragment,"[autofocus]")[0];if(t)return this.focusElement(t)}focusElement(t){if(t)return up.focus(t,{force:!0,...n}),!0}focusHash(){let t=up.viewport.firstHashTarget(this.hash,{layer:this.layer});if(t)return this.focusElement(t)}wasFocusLost(){return!this.layer.hasFocus()}}},8057:()=>{const t=up.element;up.FragmentPolling=class{constructor(t){this.options={},this.state="initialized",this.setFragment(t),this.abortable=!0}static forFragment(t){return t.upPolling||(t.upPolling=new this(t))}onPollAttributeObserved(){this.start()}onFragmentDestroyed(){this.stop()}onFragmentAborted(){this.abortable&&this.stop()}start(){"started"!==this.state&&(this.state="started",this.scheduleReload())}stop(){"started"===this.state&&(clearTimeout(this.reloadTimer),this.state="stopped")}forceStart(t){Object.assign(this.options,t),this.forceStarted=!0,this.start()}forceStop(){this.stop(),this.forceStarted=!1}scheduleReload(t=this.getInterval()){this.reloadTimer=setTimeout((()=>this.reload()),t)}reload(){if("started"!==this.state)return;let t=up.radio.pollIssue(this.fragment);if(t){up.puts("[up-poll]",`Will not poll: ${t}`);let e=Math.min(1e4,this.getInterval());this.scheduleReload(e)}else this.reloadNow()}reloadNow(){let t={url:this.options.url,fail:!1,background:!0},e=this.abortable;this.abortable=!1,up.reload(this.fragment,t).then(this.onReloadSuccess.bind(this),this.onReloadFailure.bind(this)),this.abortable=e}onReloadSuccess({fragment:t}){t?this.onFragmentSwapped(t):this.scheduleReload()}onReloadFailure(t){this.scheduleReload(),up.error.rethrowCritical(t)}onFragmentSwapped(t){this.stop(),this.forceStarted&&up.fragment.matches(this.fragment,t)&&this.constructor.forFragment(t).forceStart(this.options)}setFragment(t){this.fragment=t,up.destructor(t,(()=>this.onFragmentDestroyed())),up.fragment.onAborted(t,(()=>this.onFragmentAborted()))}getInterval(){let e=this.options.interval??t.numberAttr(this.fragment,"up-interval")??up.radio.config.pollInterval;return up.radio.config.stretchPollInterval(e)}}},2828:()=>{const t=up.util;up.FragmentProcessor=class extends up.Record{keys(){return["fragment","autoMeans","origin","layer"]}process(t){let e=this.preprocess(t);return this.tryProcess(e)}preprocess(e){return t.parseTokens(e,{separator:"or"})}tryProcess(e){if(t.isArray(e))return this.processArray(e);if(t.isFunction(e))return this.tryProcess(e(this.fragment,this.attributes()));if(t.isElement(e))return this.processElement(e);if(t.isString(e)){if("auto"===e)return this.tryProcess(this.autoMeans);let t=e.match(/^(.+?)-if-(.+?)$/);if(t)return this.resolveCondition(t[2])&&this.process(t[1])}return this.processPrimitive(e)}processArray(e){return t.find(e,(t=>this.tryProcess(t)))}resolveCondition(t){if("main"===t)return this.fragment&&up.fragment.contains(this.fragment,":main")}findSelector(t){const e={layer:this.layer,origin:this.origin};let n=this.fragment&&up.fragment.get(this.fragment,t,e)||up.fragment.get(t,e);if(n)return n;up.warn("up.render()",'Could not find an element matching "%s"',t)}}},4850:()=>{const t=up.util;up.FragmentScrolling=class extends up.FragmentProcessor{keys(){return super.keys().concat(["hash","mode","revealTop","revealMax","revealSnap","scrollBehavior"])}processPrimitive(e){switch(e){case"reset":return this.reset();case"layer":return this.revealLayer();case"main":return this.revealSelector(":main");case"restore":return this.restore();case"hash":return this.hash&&up.viewport.revealHash(this.hash,this.attributes());case"target":case"reveal":case!0:return this.revealElement(this.fragment);default:if(t.isString(e))return this.revealSelector(e)}}processElement(t){return this.revealElement(t)}revealElement(t){if(t)return up.reveal(t,this.attributes()),!0}revealSelector(t){let e=this.findSelector(t);return this.revealElement(e)}revealLayer(){return this.revealElement(this.layer.getBoxElement())}reset(){return up.viewport.resetScroll({...this.attributes(),around:this.fragment}),!0}restore(){return up.viewport.restoreScroll({...this.attributes(),around:this.fragment})}}},7956:()=>{const t=up.element,e=up.util;up.Layer=class extends up.Record{keys(){return["element","stack","history","mode","context","lastScrollTops","lastFocusCapsules"]}defaults(){return{context:{},lastScrollTops:up.viewport.newStateCache(),lastFocusCapsules:up.viewport.newStateCache()}}constructor(t={}){if(super(t),!this.mode)throw"missing { mode } option"}setupHandlers(){up.link.convertClicks(this)}teardownHandlers(){}mainTargets(){return up.layer.mainTargets(this.mode)}sync(){}accept(){throw new up.NotImplemented}dismiss(){throw new up.NotImplemented}peel(t){this.stack.peel(this,t)}evalOption(t){return e.evalOption(t,this)}isCurrent(){return this.stack.isCurrent(this)}isFront(){return this.stack.isFront(this)}isRoot(){return this.stack.isRoot(this)}isOverlay(){return this.stack.isOverlay(this)}isOpen(){return this.stack.isOpen(this)}isClosed(){return this.stack.isClosed(this)}get parent(){return this.stack.parentOf(this)}get child(){return this.stack.childOf(this)}get ancestors(){return this.stack.ancestorsOf(this)}get descendants(){return this.stack.descendantsOf(this)}get index(){return this.stack.indexOf(this)}getContentElement(){return this.contentElement||this.element}getBoxElement(){return this.boxElement||this.element}getFocusElement(){return this.getBoxElement()}getFirstSwappableElement(){throw new up.NotImplemented}contains(t){return t.closest(up.layer.anySelector())===this.element}on(...t){return this.buildEventListenerGroup(t).bind()}off(...t){return this.buildEventListenerGroup(t).unbind()}buildEventListenerGroup(t){return up.EventListenerGroup.fromBindArgs(t,{guard:t=>this.containsEventTarget(t),elements:[this.element],baseLayer:this})}containsEventTarget(t){return this.contains(t.target)}wasHitByMouseEvent(t){const e=document.elementFromPoint(t.clientX,t.clientY);return!e||this.contains(e)}buildEventEmitter(t){return up.EventEmitter.fromEmitArgs(t,{layer:this})}emit(...t){return this.buildEventEmitter(t).emit()}isDetached(){return!this.element.isConnected}saveHistory(){this.isHistoryVisible()&&(this.savedTitle=document.title,this.savedLocation=up.history.location)}restoreHistory(){this.showsLiveHistory()&&(this.savedLocation&&up.history.push(this.savedLocation),this.savedTitle&&(document.title=this.savedTitle))}asCurrent(t){return this.stack.asCurrent(this,t)}updateHistory(t){e.isString(t.location)&&(this.location=t.location),e.isString(t.title)&&(this.title=t.title)}isHistoryVisible(){return this.history&&(this.isRoot()||this.parent.isHistoryVisible())}showsLiveHistory(){return this.isHistoryVisible()&&this.isFront()&&(up.history.config.enabled||this.isRoot())}get title(){return this.showsLiveHistory()?document.title:this.savedTitle}set title(t){this.savedTitle=t,this.showsLiveHistory()&&(document.title=t)}get location(){return this.showsLiveHistory()?up.history.location:this.savedLocation}set location(t){(this.location!==(t=up.history.normalizeURL(t))||this.opening)&&(this.savedLocation=t,this.showsLiveHistory()&&up.history.push(t),this.opening||this.emit("up:layer:location:changed",{location:t}))}selector(t){return this.constructor.selector(t)}static selector(t){throw new up.NotImplemented}toString(){throw new up.NotImplemented}affix(...e){return t.affix(this.getFirstSwappableElement(),...e)}[e.isEqual.key](t){return this.constructor===t.constructor&&this.element===t.element}hasFocus(){let t=document.activeElement;return t!==document.body&&this.element.contains(t)}reset(){Object.assign(this,this.defaults())}}},7101:()=>{var t;up.Layer.Cover=((t=class extends up.Layer.OverlayWithViewport{}).mode="cover",t)},5580:()=>{var t;up.Layer.Drawer=((t=class extends up.Layer.OverlayWithViewport{}).mode="drawer",t)},86:()=>{var t;up.Layer.Modal=((t=class extends up.Layer.OverlayWithViewport{}).mode="modal",t)},7403:()=>{const t=up.element,e=up.util;up.Layer.Overlay=class extends up.Layer{keys(){return super.keys().concat(["position","align","size","origin","class","backdrop","openAnimation","closeAnimation","openDuration","closeDuration","openEasing","closeEasing","backdropOpenAnimation","backdropCloseAnimation","dismissable","dismissLabel","dismissAriaLabel","onOpened","onAccept","onAccepted","onDismiss","onDismissed","acceptEvent","dismissEvent","acceptLocation","dismissLocation","opening"])}constructor(t){super(t),!0===this.dismissable?this.dismissable=["button","key","outside"]:!1===this.dismissable?this.dismissable=[]:this.dismissable=e.parseTokens(this.dismissable),this.acceptLocation&&(this.acceptLocation=new up.URLPattern(this.acceptLocation)),this.dismissLocation&&(this.dismissLocation=new up.URLPattern(this.dismissLocation))}callback(t){let e=this[t];if(e)return e.bind(this)}createElement(t){this.nesting||(this.nesting=this.suggestVisualNesting());const n=e.compactObject(e.pick(this,["align","position","size","class","nesting"]));this.element=this.affixPart(t,null,n)}createBackdropElement(t){this.backdropElement=this.affixPart(t,"backdrop")}createViewportElement(t){this.viewportElement=this.affixPart(t,"viewport",{"up-viewport":""})}createBoxElement(t){this.boxElement=this.affixPart(t,"box")}createContentElement(t,e){this.contentElement=this.affixPart(t,"content"),this.contentElement.appendChild(e)}createDismissElement(e){return this.dismissElement=this.affixPart(e,"dismiss",{"up-dismiss":'":button"',"aria-label":this.dismissAriaLabel}),t.affix(this.dismissElement,'span[aria-hidden="true"]',{text:this.dismissLabel})}affixPart(e,n,r={}){return t.affix(e,this.selector(n),r)}static selector(t){return e.compact(["up",this.mode,t]).join("-")}suggestVisualNesting(){const{parent:t}=this;return this.mode===t.mode?1+t.suggestVisualNesting():0}setupHandlers(){super.setupHandlers(),this.overlayFocus=new up.OverlayFocus(this),this.supportsDismissMethod("button")&&this.createDismissElement(this.getBoxElement()),this.supportsDismissMethod("outside")&&(this.viewportElement?up.on(this.viewportElement,"up:click",(t=>{t.target===this.viewportElement&&this.onOutsideClicked(t,!0)})):this.unbindParentClicked=this.parent.on("up:click",((t,e)=>{if(!up.layer.isWithinForeignOverlay(e)){const n=this.origin&&this.origin.contains(e);this.onOutsideClicked(t,n)}}))),this.supportsDismissMethod("key")&&(this.unbindEscapePressed=up.event.onEscape((t=>this.onEscapePressed(t)))),this.registerClickCloser("up-accept",((t,e)=>{this.accept(t,e)})),this.registerClickCloser("up-dismiss",((t,e)=>{this.dismiss(t,e)})),up.migrate.registerLayerCloser?.(this),this.registerEventCloser(this.acceptEvent,this.accept),this.registerEventCloser(this.dismissEvent,this.dismiss),this.on("up:click","label[for]",((t,e)=>this.onLabelClicked(t,e)))}onLabelClicked(e,n){let r=n.getAttribute("for"),i=up.form.fieldSelector(t.idSelector(r)),s=up.fragment.all(i,{layer:"any"}),o=up.fragment.all(i,{layer:this});if(s.length>1&&o[0]!==s[0]){e.preventDefault();const t=o[0];t.focus(),t.matches("input[type=checkbox], input[type=radio]")&&t.click()}}onOutsideClicked(t,e){up.log.putsEvent(t),e&&up.event.halt(t),this.dismiss(":outside",{origin:t.target})}onEscapePressed(t){if(this.isFront()){let e=up.form.focusedField();e?e.blur():this.supportsDismissMethod("key")&&(up.event.halt(t,{log:!0}),this.dismiss(":key"))}}registerClickCloser(e,n){let r=`[${e}]`;this.on("up:click",r,(function(i){up.event.halt(i,{log:!0});const s=i.target.closest(r),o=t.jsonAttr(s,e),a={origin:s},u=new up.OptionsParser(s,a);u.booleanOrString("animation"),u.string("easing"),u.number("duration"),u.string("confirm"),up.error.muteUncriticalSync((()=>n(o,a)))}))}registerEventCloser(t,e){if(t)return this.on(t,(t=>{t.preventDefault(),e.call(this,t,{response:t.response})}))}tryAcceptForLocation(t){this.tryCloseForLocation(this.acceptLocation,this.accept,t)}tryDismissForLocation(t){this.tryCloseForLocation(this.dismissLocation,this.dismiss,t)}tryCloseForLocation(t,e,n){let r,i;if(t&&(r=this.location)&&(i=t.recognize(r))){const t={...i,location:r};e.call(this,t,n)}}teardownHandlers(){super.teardownHandlers(),this.unbindParentClicked?.(),this.unbindEscapePressed?.(),this.overlayFocus.teardown()}destroyElements(t){const e={...t,animation:()=>this.startCloseAnimation(t),onFinished:()=>{this.onElementsRemoved(),t.onFinished?.()},log:!1};up.destroy(this.element,e)}onElementsRemoved(){}startAnimation(t={}){const e=up.animate(this.getBoxElement(),t.boxAnimation,t);let n;return this.backdrop&&!up.motion.isNone(t.boxAnimation)&&(n=up.animate(this.backdropElement,t.backdropAnimation,t)),Promise.all([e,n])}startOpenAnimation(t={}){return this.startAnimation({boxAnimation:t.animation??this.evalOption(this.openAnimation),backdropAnimation:"fade-in",easing:t.easing||this.openEasing,duration:t.duration||this.openDuration}).then((()=>this.wasEverVisible=!0))}startCloseAnimation(t={}){const e=this.wasEverVisible&&(t.animation??this.evalOption(this.closeAnimation));return this.startAnimation({boxAnimation:e,backdropAnimation:"fade-out",easing:t.easing||this.closeEasing,duration:t.duration||this.closeDuration})}accept(t=null,e={}){return this.executeCloseChange("accept",t,e)}dismiss(t=null,e={}){return this.executeCloseChange("dismiss",t,e)}supportsDismissMethod(t){return e.contains(this.dismissable,t)}executeCloseChange(t,e,n){return n={...n,verb:t,value:e,layer:this},new up.Change.CloseLayer(n).execute()}getFirstSwappableElement(){return this.getContentElement().children[0]}toString(){return`${this.mode} overlay`}}},6412:()=>{up.Layer.OverlayWithTether=class extends up.Layer.Overlay{createElements(t){this.origin||up.fail("Missing { origin } option"),this.tether=new up.Tether({anchor:this.origin,align:this.align,position:this.position}),this.createElement(this.tether.parent),this.createContentElement(this.element,t),this.tether.start(this.element)}onElementsRemoved(){this.tether.stop()}sync(){this.isOpen()&&(this.isDetached()||this.tether.isDetached()?this.dismiss(":detached",{animation:!1,preventable:!1}):this.tether.sync())}}},7965:()=>{var t;up.Layer.OverlayWithViewport=((t=class extends up.Layer.Overlay{static getParentElement(){return document.body}createElements(t){this.shiftBody(),this.createElement(this.constructor.getParentElement()),this.backdrop&&this.createBackdropElement(this.element),this.createViewportElement(this.element),this.createBoxElement(this.viewportElement),this.createContentElement(this.boxElement,t)}onElementsRemoved(){this.unshiftBody()}shiftBody(){this.constructor.bodyShifter.shift()}unshiftBody(){this.constructor.bodyShifter.unshift()}sync(){this.isDetached()&&this.isOpen()&&this.constructor.getParentElement().appendChild(this.element)}}).bodyShifter=new up.BodyShifter,t)},4552:()=>{var t;up.Layer.Popup=((t=class extends up.Layer.OverlayWithTether{}).mode="popup",t)},7771:()=>{var t;const e=up.element;up.Layer.Root=((t=class extends up.Layer{get element(){return e.root}constructor(t){super(t),this.setupHandlers()}getFirstSwappableElement(){return document.body}static selector(){return"html"}setupHandlers(){this.element.upHandlersApplied||(this.element.upHandlersApplied=!0,super.setupHandlers())}sync(){this.setupHandlers()}accept(){this.cannotCloseRoot()}dismiss(){this.cannotCloseRoot()}cannotCloseRoot(){up.fail("Cannot close the root layer")}toString(){return"root layer"}}).mode="root",t)},6066:()=>{const t=up.util,e=up.element;up.LayerLookup=class{constructor(e,...n){this.stack=e;const r=t.parseArgIntoOptions(n,"layer");if(!1!==r.normalizeLayerOptions&&up.layer.normalizeOptions(r),this.values=t.parseTokens(r.layer),this.origin=r.origin,this.baseLayer=r.baseLayer||this.originLayer()||this.stack.current,t.isString(this.baseLayer)){const t={...r,baseLayer:this.stack.current,normalizeLayerOptions:!1};this.baseLayer=new this.constructor(this.stack,this.baseLayer,t).first()}}originLayer(){if(this.origin)return this.forElement(this.origin)}first(){return this.all()[0]}all(){let e=t.flatMap(this.values,(t=>this.resolveValue(t)));return e=t.compact(e),e=t.uniq(e),e}forElement(n){return n=e.get(n),t.find(this.stack.reversed(),(t=>t.contains(n)))}forIndex(t){return this.stack[t]}resolveValue(e){if(e instanceof up.Layer)return e;if(t.isNumber(e))return this.forIndex(e);if(/^\d+$/.test(e))return this.forIndex(Number(e));if(t.isElementish(e))return this.forElement(e);switch(e){case"any":return[this.baseLayer,...this.stack.reversed()];case"current":return this.baseLayer;case"closest":return this.stack.selfAndAncestorsOf(this.baseLayer);case"parent":return this.baseLayer.parent;case"ancestor":case"ancestors":return this.baseLayer.ancestors;case"child":return this.baseLayer.child;case"descendant":case"descendants":return this.baseLayer.descendants;case"new":return"new";case"root":return this.stack.root;case"overlay":case"overlays":return t.reverse(this.stack.overlays);case"front":return this.stack.front;case"origin":return this.originLayer();default:return up.fail("Unknown { layer } option: %o",e)}}}},6387:()=>{const t=up.util;up.LayerStack=class extends Array{constructor(){super(),Object.setPrototypeOf(this,up.LayerStack.prototype),this.currentOverrides=[],this.push(this.buildRoot())}buildRoot(){return up.layer.build({mode:"root",stack:this})}remove(e){t.remove(this,e)}peel(e,n){const r=t.reverse(e.descendants),i={...n,preventable:!1};for(let t of r)t.dismiss(":peel",i)}reset(){this.peel(this.root,{animation:!1}),this.currentOverrides=[],this.root.reset()}isOpen(t){return t.index>=0}isClosed(t){return!this.isOpen(t)}parentOf(t){return this[t.index-1]}childOf(t){return this[t.index+1]}ancestorsOf(e){return t.reverse(this.slice(0,e.index))}selfAndAncestorsOf(t){return[t,...t.ancestors]}descendantsOf(t){return this.slice(t.index+1)}isRoot(t){return this[0]===t}isOverlay(t){return!this.isRoot(t)}isCurrent(t){return this.current===t}isFront(t){return this.front===t}get(...t){return this.getAll(...t)[0]}getAll(...t){return new up.LayerLookup(this,...t).all()}sync(){for(let t of this)t.sync()}asCurrent(t,e){try{return this.currentOverrides.push(t),e()}finally{this.currentOverrides.pop()}}reversed(){return t.reverse(this)}dismissOverlays(e=null,n={}){n.dismissable=!1;for(let r of t.reverse(this.overlays))r.dismiss(e,n)}[t.copy.key](){return t.copyArrayLike(this)}get count(){return this.length}get root(){return this[0]}get overlays(){return this.root.descendants}get current(){return t.last(this.currentOverrides)||this.front}get front(){return t.last(this)}}},5390:()=>{up.LinkFeedbackURLs=class{constructor(t){const e=up.feedback.normalizeURL;if(this.isSafe=up.link.isSafe(t),this.isSafe){const n=t.getAttribute("href");n&&"#"!==n&&(this.href=e(n));const r=t.getAttribute("up-href");r&&(this.upHREF=e(r));const i=t.getAttribute("up-alias");i&&(this.aliasPattern=new up.URLPattern(i,e))}}isCurrent(t){return this.isSafe&&!!(this.href&&this.href===t||this.upHREF&&this.upHREF===t||this.aliasPattern&&this.aliasPattern.test(t,!1))}}},2618:()=>{const t=up.util,e=up.element;up.LinkPreloader=class{constructor(){this.considerPreload=this.considerPreload.bind(this)}watchLink(t){up.link.isSafe(t)&&(this.on(t,"mouseenter",(t=>this.considerPreload(t,!0))),this.on(t,"mousedown touchstart",(t=>this.considerPreload(t))),this.on(t,"mouseleave",(t=>this.stopPreload(t))))}on(t,e,n){up.on(t,e,{passive:!0},n)}considerPreload(t,e){const n=t.target;n!==this.currentLink&&(this.reset(),this.currentLink=n,up.link.shouldFollowEvent(t,n)&&(e?this.preloadAfterDelay(t,n):this.preloadNow(t,n)))}stopPreload(t){if(t.target===this.currentLink)return this.reset()}reset(){this.currentLink&&(clearTimeout(this.timer),this.currentRequest?.background&&this.currentRequest.abort(),this.currentLink=void 0,this.currentRequest=void 0)}preloadAfterDelay(n,r){const i=e.numberAttr(r,"up-preload-delay")??up.link.config.preloadDelay;this.timer=t.timer(i,(()=>this.preloadNow(n,r)))}preloadNow(t,e){e.isConnected?(up.log.putsEvent(t),up.error.muteUncriticalRejection(up.link.preload(e,{onQueued:t=>this.currentRequest=t})),this.queued=!0):this.reset()}}},1653:()=>{let t="up.log.enabled",e=!1;try{e=!!sessionStorage?.getItem(t)}catch{}up.LogConfig=class extends up.Config{constructor(){super((()=>({banner:!0,format:!0})))}get enabled(){return e}set enabled(n){e=n;try{sessionStorage?.setItem(t,n?"1":"")}catch{}}}},7792:()=>{const t=up.util,e=up.element;up.MotionController=class{constructor(t){this.activeClass=`up-${t}`,this.selector=`.${this.activeClass}`,this.finishEvent=`up:${t}:finish`,this.finishCount=0,this.clusterCount=0}startFunction(t,n,r={}){t=e.list(t);const i=()=>up.error.muteUncriticalRejection(n());if(r.trackMotion=r.trackMotion??up.motion.isEnabled(),!1===r.trackMotion)return i();{r.trackMotion=!1,this.finish(t),this.markCluster(t);let e=this.whileForwardingFinishEvent(t,i);return e=e.then((()=>this.unmarkCluster(t))),e}}finish(t){if(this.finishCount++,0!==this.clusterCount&&up.motion.isEnabled()){t=this.expandFinishRequest(t);for(let e of t)this.finishOneElement(e);return up.migrate.formerlyAsync?.("up.motion.finish()")}}expandFinishRequest(n){return n?t.flatMap(n,(t=>e.list(t.closest(this.selector),t.querySelectorAll(this.selector)))):document.querySelectorAll(this.selector)}isActive(t){return t.classList.contains(this.activeClass)}finishOneElement(t){this.emitFinishEvent(t)}emitFinishEvent(t,e={}){return e={target:t,log:!1,...e},up.emit(this.finishEvent,e)}markCluster(t){this.clusterCount++,this.toggleActive(t,!0)}unmarkCluster(t){this.clusterCount--,this.toggleActive(t,!1)}toggleActive(t,e){for(let n of t)n.classList.toggle(this.activeClass,e)}whileForwardingFinishEvent(t,e){if(t.length<2)return e();const n=up.on(t,this.finishEvent,(e=>{if(!e.forwarded)for(let n of t)n!==e.target&&this.isActive(n)&&this.emitFinishEvent(n,{forwarded:!0})}));return e().then(n)}async reset(){await this.finish(),this.finishCount=0,this.clusterCount=0}}},4308:()=>{const t=up.util,e=up.element;up.NonceableCallback=class{constructor(t,e){this.script=t,this.nonce=e}static fromString(t){let e=t.match(/^(nonce-([^\s]+)\s)?(.*)$/);return new this(e[3],e[2])}toFunction(...t){if(up.browser.canEval())return new Function(...t,this.script);if(this.nonce){let e=this;return function(...n){return e.runAsNoncedFunction(this,t,n)}}return this.cannotRun.bind(this)}toString(){return`nonce-${this.nonce} ${this.script}`}cannotRun(){throw new Error(`Your Content Security Policy disallows inline JavaScript (${this.script}). See https://unpoly.com/csp for solutions.`)}runAsNoncedFunction(t,e,n){let r,i=`\n      try {\n        up.noncedEval.value = (function(${e.join(",")}) {\n          ${this.script}\n        }).apply(up.noncedEval.thisArg, up.noncedEval.args)\n      } catch (error) {\n        up.noncedEval.error = error\n      }\n    `;try{if(up.noncedEval={args:n,thisArg:t},r=up.element.affix(document.body,"script",{nonce:this.nonce,text:i}),up.noncedEval.error)throw up.noncedEval.error;return up.noncedEval.value}finally{up.noncedEval=void 0,r&&r.remove()}}allowedBy(e){return this.nonce&&t.contains(e,this.nonce)}static adoptNonces(n,r){if(!r?.length)return;const i=t.memoize(up.protocol.cspNonce);t.each(up.protocol.config.nonceableAttributes,(s=>{let o=e.subtree(n,`[${s}^="nonce-"]`);t.each(o,(t=>{let e=t.getAttribute(s),n=this.fromString(e),o=(t,...n)=>up.log.warn("up.render()",`Cannot use callback [${s}="${e}"]: ${t}`,...n);if(!n.allowedBy(r))return o("Callback's CSP nonce (%o) does not match response header (%o)",n.nonce,r);let a=i();if(!a)return o("Current page's CSP nonce is unknown");n.nonce=a,t.setAttribute(s,n.toString())}))}))}}},1104:()=>{const t=up.util,e=up.element;up.OptionsParser=class{constructor(t,e,n={}){this.options=e,this.element=t,this.fail=n.fail,this.closest=n.closest,this.attrPrefix=n.attrPrefix||"up-",this.defaults=n.defaults||{}}string(t,n){this.parse(e.attr,t,n)}boolean(t,n){this.parse(e.booleanAttr,t,n)}number(t,n){this.parse(e.numberAttr,t,n)}booleanOrString(t,n){this.parse(e.booleanOrStringAttr,t,n)}json(t,n){this.parse(e.jsonAttr,t,n)}callback(t,n={}){this.parse(((t,r)=>e.callbackAttr(t,r,n)),t,n)}parse(e,n,r={}){const i=t.wrapList(r.attr??this.attrNameForKey(n));let s=this.options[n];for(let t of i)s??(s=this.parseFromAttr(e,this.element,t));s??(s=r.default??this.defaults[n]);let o,a=r.normalize;if(a&&(s=a(s)),t.isDefined(s)&&(this.options[n]=s),this.fail&&(o=up.fragment.failKey(n))){const n=t.compact(t.map(i,(t=>this.deriveFailAttrName(t))));this.parse(e,o,{...r,attr:n})}}parseFromAttr(t,n,r){return this.closest?e.closestAttr(n,r,t):t(n,r)}deriveFailAttrName(t){return this.deriveFailAttrNameForPrefix(t,this.attrPrefix+"on-")||this.deriveFailAttrNameForPrefix(t,this.attrPrefix)}deriveFailAttrNameForPrefix(t,e){if(t.startsWith(e))return`${e}fail-${t.substring(e.length)}`}attrNameForKey(e){return`${this.attrPrefix}${t.camelToKebabCase(e)}`}}},8665:()=>{const t=up.element,e=up.util;up.OverlayFocus=class{constructor(t){this.layer=t,this.focusElement=this.layer.getFocusElement()}moveToFront(){this.enabled||(this.enabled=!0,this.untrapFocus=up.on("focusin",(t=>this.onFocus(t))),this.unsetAttrs=t.setTemporaryAttrs(this.focusElement,{tabindex:"0",role:"dialog","aria-modal":"true"}),this.focusTrapBefore=t.affix(this.focusElement,"beforebegin","up-focus-trap[tabindex=0]"),this.focusTrapAfter=t.affix(this.focusElement,"afterend","up-focus-trap[tabindex=0]"))}moveToBack(){this.teardown()}teardown(){this.enabled&&(this.enabled=!1,this.untrapFocus(),this.unsetAttrs(),this.focusTrapBefore.remove(),this.focusTrapAfter.remove())}onFocus(t){const{target:e}=t;this.processingFocusEvent||up.layer.isWithinForeignOverlay(e)||(this.processingFocusEvent=!0,e===this.focusTrapBefore?this.focusEnd():e!==this.focusTrapAfter&&this.layer.contains(e)||this.focusStart(),this.processingFocusEvent=!1)}focusStart(t){up.focus(this.focusElement,t)}focusEnd(){this.focusLastDescendant(this.layer.getBoxElement())||this.focusStart()}focusLastDescendant(t){for(let n of e.reverse(t.children))if(up.viewport.tryFocus(n)||this.focusLastDescendant(n))return!0}}},3645:()=>{const t=up.util,e=up.element;up.Params=class{constructor(t){this.clear(),this.addAll(t)}clear(){this.entries=[]}[t.copy.key](){return new up.Params(this)}toObject(){const e={};for(let n of this.entries){const{name:r,value:i}=n;t.isBasicObjectProperty(r)||(this.isArrayKey(r)?(e[r]||(e[r]=[]),e[r].push(i)):e[r]=i)}return e}toArray(){return this.entries}toFormData(){const t=new FormData;for(let e of this.entries)t.append(e.name,e.value);return t.entries||(t.originalArray=this.entries),t}toQuery(){let e=t.map(this.entries,this.arrayEntryToQuery.bind(this));return e=t.compact(e),e.join("&")}arrayEntryToQuery(e){const{value:n}=e;if(this.isBinaryValue(n))return;let r=encodeURIComponent(e.name);return t.isGiven(n)&&(r+="=",r+=encodeURIComponent(n)),r}isBinaryValue(t){return t instanceof Blob}hasBinaryValues(){const e=t.map(this.entries,"value");return t.some(e,this.isBinaryValue)}toURL(e){let n=[e,this.toQuery()];n=t.filter(n,t.isPresent);const r=t.contains(e,"?")?"&":"?";return n.join(r)}add(t,e){this.entries.push({name:t,value:e})}addAll(e){t.isMissing(e)||(e instanceof this.constructor?this.entries.push(...e.entries):t.isArray(e)?this.entries.push(...e):t.isString(e)?this.addAllFromQuery(e):t.isFormData(e)?this.addAllFromFormData(e):t.isObject(e)?this.addAllFromObject(e):up.fail("Unsupport params type: %o",e))}addAllFromObject(e){for(let n in e){const r=e[n],i=t.isArray(r)?r:[r];for(let t of i)this.add(n,t)}}addAllFromQuery(e){for(let n of e.split("&"))if(n){let[e,r]=n.split("=");e=decodeURIComponent(e),r=t.isGiven(r)?decodeURIComponent(r):null,this.add(e,r)}}addAllFromFormData(t){for(let e of t.entries())this.add(...e)}set(t,e){this.delete(t),this.add(t,e)}delete(e){this.entries=t.reject(this.entries,this.matchEntryFn(e))}matchEntryFn(t){return e=>e.name===t}get(t){return this.isArrayKey(t)?this.getAll(t):this.getFirst(t)}getFirst(e){const n=t.find(this.entries,this.matchEntryFn(e));return n?.value}getAll(e){if(this.isArrayKey(e))return this.getAll(e);{const n=t.map(this.entries,this.matchEntryFn(e));return t.map(n,"value")}}isArrayKey(t){return t.endsWith("[]")}[t.isBlank.key](){return 0===this.entries.length}static fromForm(t){return t=up.fragment.get(t),this.fromFields(up.form.fields(t))}static fromFields(e){const n=new this;for(let r of t.wrapList(e))n.addField(r);return n}addField(t){let n=(t=e.get(t)).name;if(n&&!t.disabled){const{tagName:e}=t,{type:r}=t;if("SELECT"===e)for(let e of t.querySelectorAll("option"))e.selected&&this.add(n,e.value);else if("checkbox"===r||"radio"===r)t.checked&&this.add(n,t.value);else{if("file"!==r)return this.add(n,t.value);for(let e of t.files)this.add(n,e)}}}[t.isEqual.key](e){return this.constructor===e.constructor&&t.isEqual(this.entries,e.entries)}static fromURL(e){const n=new this;let r=t.parseURL(e).search;return r&&(r=r.replace(/^\?/,""),n.addAll(r)),n}static stripURL(e){return t.normalizeURL(e,{search:!1})}static merge(...t){return t.reduce((function(t,e){return t.addAll(e),t}),new up.Params)}}},7782:()=>{const t=up.element;up.ProgressBar=class{constructor(){this.step=0,this.element=t.affix(document.body,"up-progress-bar"),this.element.style.transition="width 300ms ease-out",this.moveTo(0),up.element.paint(this.element),this.width=31,this.nextStep()}nextStep(){let t;t=this.width<80?Math.random()<.15?7+5*Math.random():1.5+.5*Math.random():.13*(100-this.width)*Math.random(),this.moveTo(this.width+t),this.step++;const e=300+40*this.step;this.timeout=setTimeout(this.nextStep.bind(this),e)}moveTo(t){this.width=t,this.element.style.width=`${t}vw`}destroy(){clearTimeout(this.timeout),this.element.remove()}conclude(){clearTimeout(this.timeout),this.moveTo(100),setTimeout(this.destroy.bind(this),300)}}},2406:()=>{const t=up.util;up.Record=class{keys(){throw"Return an array of keys"}defaults(t){return{}}constructor(t){Object.assign(this,this.defaults(t),this.attributes(t))}attributes(e=this){return t.pick(e,this.keys())}[t.copy.key](){return t.variant(this)}[t.isEqual.key](e){return this.constructor===e.constructor&&t.isEqual(this.attributes(),e.attributes())}}},1279:()=>{up.Rect=class extends up.Record{keys(){return["left","top","width","height"]}get bottom(){return this.top+this.height}get right(){return this.left+this.width}static fromElement(t){return new this(t.getBoundingClientRect())}}},2714:()=>{var t;const e=up.util;up.RenderJob=(t=class{constructor(t){this.options=up.RenderOptions.preprocess(t),this.rendered=this.execute()}async execute(){try{let t=await this.makeChange();return this.runResultCallbacks(t),t}catch(t){throw this.runResultCallbacks(t)||this.options.onError?.(t),t}}runResultCallbacks(t){if(t instanceof up.RenderResult)return t.none||t.options.onRendered?.(t),t.finished.then(t.options.onFinished,e.noop),!0}get finished(){return this.awaitFinished()}async awaitFinished(){try{let t=await this.rendered;return await t.finished}catch(t){throw t instanceof up.RenderResult?await t.finished:t}}makeChange(){if(this.guardRender(),this.options.url){let t=t=>this.handleAbortOption(t);this.change=new up.Change.FromURL({...this.options,onRequest:t})}else this.options.response?(this.change=new up.Change.FromResponse(this.options),this.handleAbortOption(null)):(this.change=new up.Change.FromContent(this.options),this.handleAbortOption(null));return this.change.execute()}guardRender(){up.browser.assertConfirmed(this.options);let t=e.pluckKey(this.options,"guardEvent");if(t&&(t.renderOptions=this.options,up.emit(t,{target:this.options.origin}).defaultPrevented)){let e=`Rendering was prevented by ${t.type} listener`;throw up.puts("up.render()",e),new up.Aborted(e)}up.RenderOptions.assertContentGiven(this.options)}handleAbortOption(t){let{abort:n}=this.options;if(!n||!up.network.isBusy())return;let{fragments:r,layer:i,origin:s}=this.change.getPreflightProps(),o={except:t,logOnce:["up.render()","Change with { abort } option will abort other requests"]};"target"===n?up.fragment.abort(r,o):"layer"===n?up.fragment.abort({...o,layer:i}):"all"===n||!0===n?up.fragment.abort({...o,layer:"any"}):e.isFunction(n)?n(o):up.fragment.abort(n,{...o,layer:i,origin:s})}},e.delegate(t.prototype,["then","catch","finally"],(function(){return this.rendered})),t)},2705:()=>{const t=up.util;up.RenderOptions=function(){const e={useHungry:!0,useKeep:!0,source:!0,saveScroll:!0,saveFocus:!0,focus:"keep",abort:"target",failOptions:!0},n={abort:!1,confirm:!1,feedback:!1,cache:!0,background:!0},r=["url","method","origin","headers","params","cache","fallback","abort","abortable","confirm","feedback","origin","baseLayer","fail","onError"].concat(["keep","hungry","history","source","saveScroll","navigate"]),i=["url","response","content","fragment","document"],s=["history","focus","scroll"];function o(t){const e={};for(let n in t){const r=t[n];let i=up.fragment.successKey(n);i&&(e[i]=r)}return e}return{preprocess:function(r){up.migrate.preprocessRenderOptions?.(r);const i=t.merge(e,function(t){if(t.navigate)return up.fragment.config.navigateOptions}(r));return t.merge(t.omit(i,s),{defaults:i},r,function(t){if(t.preload)return n}(r))},finalize:function(e,n){return t.merge(e.defaults,n,e)},assertContentGiven:function(e){t.some(i,(n=>t.isGiven(e[n])))||(e.defaultToEmptyContent?e.content="":up.fail("up.render() needs either { "+i.join(", ")+" } option"))},deriveFailOptions:function(e){return e.failOptions?{...e.defaults,...t.pick(e,r),...o(e),failPrefixForced:!0}:{...e,...o(e)}}}}()},606:()=>{up.RenderResult=class extends up.Record{keys(){return["fragments","layer","target","options","finished"]}defaults(){return{fragments:[]}}get none(){return!this.fragments.length}get fragment(){return this.fragments[0]}static buildNone(){return new this({target:":none",finished:Promise.resolve()})}}},5437:()=>{var t;const e=up.util;up.Request=(t=class extends up.Record{keys(){return["method","url","hash","params","target","failTarget","headers","timeout","background","cache","expireCache","evictCache","layer","mode","context","failLayer","failMode","failContext","origin","fragments","builtAt","wrapMethod","contentType","payload","onQueued","onLoading","fail","abortable","badResponseTime"]}defaults(){return{state:"new",abortable:!0,headers:{},timeout:up.network.config.timeout,builtAt:new Date}}constructor(t){if(super(t),this.params=new up.Params(this.params),null==this.wrapMethod&&(this.wrapMethod=up.network.config.wrapMethod),this.normalize(),(this.target||this.layer||this.origin)&&!t.basic){const t={origin:this.origin};this.layer=up.layer.get(this.layer,t),this.failLayer=up.layer.get(this.failLayer||this.layer,t),this.context||(this.context=this.layer.context||{}),this.failContext||(this.failContext=this.failLayer.context||{}),this.mode||(this.mode=this.layer.mode),this.failMode||(this.failMode=this.failLayer.mode)}this.deferred=e.newDeferred(),this.badResponseTime??(this.badResponseTime=e.evalOption(up.network.config.badResponseTime,this)),this.addAutoHeaders()}get xhr(){return this._xhr??(this._xhr=new XMLHttpRequest)}get fragments(){if(this._fragments)return this._fragments;if(this.target){let t=up.fragment.parseTargetSteps(this.target),n=e.map(t,"selector"),r={origin:this.origin,layer:this.layer};return e.compact(e.map(n,(t=>up.fragment.get(t,r))))}}set fragments(t){this._fragments=t}get fragment(){return this.fragments?.[0]}normalize(){this.method=e.normalizeMethod(this.method),this.extractHashFromURL(),this.transferParamsToURL(),this.url=e.normalizeURL(this.url)}evictExpensiveAttrs(){e.task((()=>{this.layer=void 0,this.failLayer=void 0,this.origin=void 0,this.fragments=void 0}))}extractHashFromURL(){let t=this.url?.match(/^([^#]*)(#.+)$/);if(t)return this.url=t[1],this.hash=t[2]}transferParamsToURL(){!this.url||this.allowsPayload()||e.isBlank(this.params)||(this.url=this.params.toURL(this.url),this.params.clear())}isSafe(){return up.network.isSafeMethod(this.method)}allowsPayload(){return e.methodAllowsPayload(this.method)}will302RedirectWithGET(){return this.isSafe()||"POST"===this.method}willCache(){return e.evalAutoOption(this.cache,up.network.config.autoCache,this)}runQueuedCallbacks(){e.always(this,(()=>this.evictExpensiveAttrs())),this.onQueued?.(this)}load(){if("new"===this.state)return this.emitLoad()?(this.state="loading",this.normalize(),this.onLoading?.(),this.expired=!1,new up.Request.XHRRenderer(this).buildAndSend({onload:()=>this.onXHRLoad(),onerror:()=>this.onXHRError(),ontimeout:()=>this.onXHRTimeout(),onabort:()=>this.onXHRAbort()}),!0):void this.abort({reason:"Prevented by event listener"})}emitLoad(){return!this.emit("up:request:load",{log:["Loading %s",this.description]}).defaultPrevented}loadPage(){up.network.abort(),new up.Request.FormRenderer(this).buildAndSubmit()}onXHRLoad(){const t=this.extractResponseFromXHR(),e="Loaded "+t.description;this.emit("up:request:loaded",{request:t.request,response:t,log:e}),this.respondWith(t)}onXHRError(){this.setOfflineState("Network error")}onXHRTimeout(){this.setOfflineState("Timeout")}onXHRAbort(){this.setAbortedState()}abort({reason:t}={}){this.setAbortedState(t)&&this._xhr&&this._xhr.abort()}setAbortedState(t){if(this.isSettled())return;let e="Aborted request to "+this.description+(t?": "+t:"");return this.state="aborted",this.deferred.reject(new up.Aborted(e)),this.emit("up:request:aborted",{log:e}),!0}setOfflineState(t){if(this.isSettled())return;let e="Cannot load request to "+this.description+(t?": "+t:"");this.state="offline",this.deferred.reject(new up.Offline(e)),this.emit("up:request:offline",{log:e})}respondWith(t){this.response=t,this.isSettled()||(this.state="loaded",t.ok?this.deferred.resolve(t):this.deferred.reject(t))}isSettled(){return"new"!==this.state&&"loading"!==this.state&&"tracking"!==this.state}csrfHeader(){return up.protocol.csrfHeader()}csrfParam(){return up.protocol.csrfParam()}csrfToken(){if(!this.isSafe()&&!this.isCrossOrigin())return up.protocol.csrfToken()}isCrossOrigin(){return e.isCrossOrigin(this.url)}extractResponseFromXHR(){const t={method:this.method,url:this.url,request:this,xhr:this.xhr,text:this.xhr.responseText,status:this.xhr.status,title:up.protocol.titleFromXHR(this.xhr),target:up.protocol.targetFromXHR(this.xhr),acceptLayer:up.protocol.acceptLayerFromXHR(this.xhr),dismissLayer:up.protocol.dismissLayerFromXHR(this.xhr),eventPlans:up.protocol.eventPlansFromXHR(this.xhr),context:up.protocol.contextFromXHR(this.xhr),expireCache:up.protocol.expireCacheFromXHR(this.xhr),evictCache:up.protocol.evictCacheFromXHR(this.xhr),fail:this.fail};let n=up.protocol.methodFromXHR(this.xhr),r=up.protocol.locationFromXHR(this.xhr);return r&&(e.matchURLs(this.url,r)||n||(n="GET"),t.url=r),n&&(t.method=n),new up.Response(t)}buildEventEmitter(t){return up.EventEmitter.fromEmitArgs(t,{layer:this.layer,request:this,origin:this.origin})}emit(...t){return this.buildEventEmitter(t).emit()}assertEmitted(...t){this.buildEventEmitter(t).assertEmitted()}get description(){return this.method+" "+this.url}isPartOfSubtree(t){return!(!this.fragments||!t)&&(t=e.wrapList(t),e.some(this.fragments,(function(n){return e.some(t,(t=>t.contains(n)))})))}get age(){return new Date-this.builtAt}header(t){return this.headers[t]}addAutoHeaders(){for(let t of["target","failTarget","mode","failMode","context","failContext"])this.addAutoHeader(up.protocol.headerize(t),this[t]);let t,e;(t=this.csrfHeader())&&(e=this.csrfToken())&&this.addAutoHeader(t,e),this.addAutoHeader(up.protocol.headerize("version"),up.version)}addAutoHeader(t,n){e.isMissing(n)||((e.isOptions(n)||e.isArray(n))&&(n=e.safeStringifyJSON(n)),this.headers[t]=n)}static tester(t,{except:n}={}){let r;if(e.isFunction(t))r=t;else if(t instanceof this)r=e=>t===e;else if(e.isString(t)){let e=new up.URLPattern(t);r=t=>e.test(t.url)}else r=e=>t;return n?t=>!up.cache.willHaveSameResponse(t,n)&&r(t):r}},e.delegate(t.prototype,["then","catch","finally"],(function(){return this.deferred})),t)},7974:()=>{const t=up.util;up.Request.Cache=class{constructor(){this.reset()}reset(){this.varyInfo={},this.map=new Map}cacheKey(e){let n=this.getPreviousInfluencingHeaders(e),r=t.flatMap(n,(t=>[t,e.header(t)]));return[e.description,...r].join(":")}getPreviousInfluencingHeaders(t){var e,n;return(e=this.varyInfo)[n=t.description]||(e[n]=new Set)}get(t){t=this.wrap(t);let e=this.cacheKey(t),n=this.map.get(e);if(n){if(this.isUsable(n))return n;this.map.delete(e)}}get capacity(){return up.network.config.cacheSize}isUsable(t){return t.age<up.network.config.cacheEvictAge}async put(t){t=this.wrap(t),this.makeRoom();let e=this.updateCacheKey(t);this.map.set(e,t)}updateCacheKey(t){let e=this.cacheKey(t),{response:n}=t;if(n){this.mergePreviousHeaderNames(t,n);let r=this.cacheKey(t);return this.renameMapKey(e,r),r}return e}renameMapKey(t,e){t!==e&&this.map.has(t)&&(this.map.set(e,this.map.get(t)),this.map.delete(t))}mergePreviousHeaderNames(t,e){let n=e.ownInfluncingHeaders;if(n.length){let e=this.getPreviousInfluencingHeaders(t);for(let t of n)e.add(t)}}alias(t,e){if(t=this.get(t))return e=this.wrap(e),this.track(t,e,{force:!0}),this.put(e),e}async track(e,n,r={}){n.trackedRequest=e,n.state="tracking";let i=await t.always(e);i instanceof up.Response?r.force||this.isCacheCompatible(e,n)?(n.fromCache=!0,i=t.variant(i,{request:n}),n.respondWith(i),t.delegate(n,["expired","state"],(()=>e))):(delete n.trackedRequest,n.state="new",r.onIncompatible?.(n)):(n.state=e.state,n.deferred.reject(i))}willHaveSameResponse(t,e){return t===e||t===e.trackedRequest}delete(t){t=this.wrap(t);let e=this.cacheKey(t);this.map.delete(e)}evict(t=!0,e){this.eachMatch(t,e,(t=>this.delete(t)))}expire(t=!0,e){this.eachMatch(t,e,(t=>t.expired=!0))}makeRoom(){for(;this.map.size>=this.capacity;){let t=this.map.keys().next().value;this.map.delete(t)}}eachMatch(e=!0,n,r){let i=up.Request.tester(e,n),s=t.filter(this.map.values(),i);t.each(s,r)}isCacheCompatible(t,e){return this.cacheKey(t)===this.cacheKey(e)}wrap(e){return t.wrapValue(up.Request,e)}}},5221:()=>{const t=up.util,e=up.element,n=["GET","POST"];up.Request.FormRenderer=class{constructor(t){this.request=t}buildAndSubmit(){this.params=t.copy(this.request.params);let r=this.request.url,{method:i}=this.request;const s=up.Params.fromURL(r);this.params.addAll(s),r=up.Params.stripURL(r),t.contains(n,i)||(i=up.protocol.wrapMethod(i,this.params)),this.form=e.affix(document.body,"form.up-request-loader",{method:i,action:r});let o,a,u=this.request.contentType;u&&this.form.setAttribute("enctype",u),(o=this.request.csrfParam())&&(a=this.request.csrfToken())&&this.params.add(o,a),t.each(this.params.toArray(),this.addField.bind(this)),up.browser.submitForm(this.form)}addField(t){e.affix(this.form,"input[type=hidden]",t)}}},6413:()=>{const t=up.util;up.Request.Queue=class{constructor(){this.reset()}reset(){this.queuedRequests=[],this.currentRequests=[],this.emittedLate=!1}get allRequests(){return this.currentRequests.concat(this.queuedRequests)}asap(e){e.runQueuedCallbacks(),t.always(e,(t=>this.onRequestSettled(e,t))),this.scheduleSlowTimer(e),this.queueRequest(e),t.microtask((()=>this.poke()))}promoteToForeground(t){t.background&&(t.background=!1,this.scheduleSlowTimer(t))}scheduleSlowTimer(e){let n=Math.max(e.badResponseTime-e.age,0);t.timer(n,(()=>this.checkLate()))}getMaxConcurrency(){return t.evalOption(up.network.config.concurrency)}hasConcurrencyLeft(){const t=this.getMaxConcurrency();return-1===t||this.currentRequests.length<t}isBusy(){return this.currentRequests.length>0||this.queuedRequests.length>0}queueRequest(t){this.queuedRequests.push(t)}pluckNextRequest(){let e=t.find(this.queuedRequests,(t=>!t.background));return e||(e=this.queuedRequests[0]),t.remove(this.queuedRequests,e)}sendRequestNow(t){t.load()&&this.currentRequests.push(t)}onRequestSettled(e,n){t.remove(this.currentRequests,e)||t.remove(this.queuedRequests,e),n instanceof up.Response&&n.ok&&up.network.registerAliasForRedirect(e,n),this.checkLate(),t.microtask((()=>this.poke()))}poke(){let t;if(this.hasConcurrencyLeft()&&(t=this.pluckNextRequest()))return this.sendRequestNow(t)}abort(...e){let n=t.extractOptions(e),{except:r,reason:i,logOnce:s}=n,o=e[0]??!0,a=up.Request.tester(o,{except:r});for(let e of[this.currentRequests,this.queuedRequests]){const n=t.filter(e,a);for(let r of n)s&&(up.puts(...s),s=null),r.abort({reason:i}),t.remove(e,r)}}checkLate(){const t=this.isLate();this.emittedLate!==t&&(this.emittedLate=t,t?up.emit("up:network:late",{log:"Server is slow to respond"}):up.emit("up:network:recover",{log:"Slow requests were loaded"}))}isLate(){const e=t.reject(this.allRequests,"background");return t.some(e,(t=>t.age>=t.badResponseTime-1))}}},2298:()=>{var t;const e="multipart/form-data",n=up.util;up.Request.XHRRenderer=(t=class{constructor(t){this.request=t}buildAndSend(t){const e=this.request.xhr;this.params=n.copy(this.request.params),this.request.timeout&&(e.timeout=this.request.timeout),e.open(this.getMethod(),this.request.url);let r=this.getContentType();r&&e.setRequestHeader("Content-Type",r);for(let t in this.request.headers){let n=this.request.headers[t];e.setRequestHeader(t,n)}Object.assign(e,t),e.send(this.getPayload())}getMethod(){return this.method||(this.method=this.request.method,this.request.wrapMethod&&!this.request.will302RedirectWithGET()&&(this.method=up.protocol.wrapMethod(this.method,this.params))),this.method}getContentType(){return this.finalizePayload(),this.contentType}getPayload(){return this.finalizePayload(),this.payload}finalizePayload(){this.payload=this.request.payload,this.contentType=this.request.contentType,!this.payload&&this.request.allowsPayload()&&(this.contentType||(this.contentType=this.params.hasBinaryValues()?e:"application/x-www-form-urlencoded"),this.contentType===e?(this.contentType=null,this.payload=this.params.toFormData()):this.payload=this.params.toQuery().replace(/%20/g,"+"))}},n.memoizeMethod(t.prototype,["finalizePayload"]),t)},4517:()=>{const t=up.util;up.Response=class extends up.Record{keys(){return["method","url","text","status","request","xhr","target","title","acceptLayer","dismissLayer","eventPlans","context","expireCache","evictCache","headers","loadedAt","fail"]}defaults(){return{headers:{},loadedAt:new Date}}get ok(){return!t.evalOption(this.fail??up.network.config.fail,this)}get none(){return!this.text}isCacheable(){return this.ok&&!this.none}header(t){return this.headers[t]||this.xhr?.getResponseHeader(t)}get ownInfluncingHeaders(){let e=up.protocol.influencingHeadersFromResponse(this);return t.filter(e,(t=>this.request.header(t)))}get contentType(){return this.header("Content-Type")}get cspNonces(){return up.protocol.cspNoncesFromHeader(this.header("Content-Security-Policy"))}get lastModified(){let t=this.header("Last-Modified");if(t)return new Date(t)}get etag(){return this.header("ETag")}get json(){return this.parsedJSON||(this.parsedJSON=JSON.parse(this.text))}get age(){return new Date-this.loadedAt}get expired(){return this.age>up.network.config.cacheExpireAge||this.request.expired}get description(){return`HTTP ${this.status} response to ${this.request.description}`}}},7241:()=>{var t;const e=up.util,n=up.element;up.ResponseDoc=(t=class{constructor(t){if(this.root=this.parseDocument(t)||this.parseFragment(t)||this.parseContent(t),up.fragment.config.runScripts||this.root.querySelectorAll("script").forEach((t=>t.remove())),this.cspNonces=t.cspNonces,t.origin){let e=up.fragment.tryToTarget(t.origin);e&&(this.rediscoveredOrigin=this.select(e))}}parseDocument(t){let e=this.parse(t.document,n.createBrokenDocumentFromHTML);if(e)return this.scriptishNeedFix=!0,e}parseContent(t){let r=t.content||"",i=t.target||up.fail("must pass a { target } when passing { content }");i=e.map(up.fragment.parseTargetSteps(i),"selector").join(",");const s=n.createFromSelector(i);return e.isString(r)?s.innerHTML=r:s.appendChild(r),s}parseFragment(t){return this.parse(t.fragment)}parse(t,r=n.createFromHTML){return e.isString(t)&&(t=r(t)),t}rootSelector(){return up.fragment.toTarget(this.root)}getTitle(){return this.root.querySelector("head title")?.textContent}select(t){return new up.FragmentFinder({selector:t,origin:this.rediscoveredOrigin,externalRoot:this.root}).find()}selectSteps(t){return t.filter((t=>{if(t.newElement||(t.newElement=this.select(t.selector)),t.newElement)return!0;if(!t.maybe)throw new up.CannotMatch}))}finalizeElement(t){up.NonceableCallback.adoptNonces(t,this.cspNonces),this.scriptishNeedFix&&t.querySelectorAll("noscript, script").forEach(n.fixScriptish)}},e.memoizeMethod(t.prototype,"getTitle"),t)},2723:()=>{const t=up.element,e=up.util;up.RevealMotion=class{constructor(e,n={}){this.element=e,this.options=n,this.viewport=t.get(this.options.viewport)||up.viewport.get(this.element),this.obstructionsLayer=up.layer.get(this.viewport);const r=up.viewport.config;this.snap=this.options.snap??this.options.revealSnap??r.revealSnap,this.padding=this.options.padding??this.options.revealPadding??r.revealPadding,this.top=this.options.top??this.options.revealTop??r.revealTop,this.max=this.options.max??this.options.revealMax??r.revealMax,this.topObstructions=r.fixedTop,this.bottomObstructions=r.fixedBottom}start(){const t=this.getViewportRect(this.viewport),n=up.Rect.fromElement(this.element);if(this.max){const t=e.evalOption(this.max,this.element);n.height=Math.min(n.height,t)}this.addPadding(n),this.substractObstructions(t),t.height<0&&up.fail("Viewport has no visible area");const r=this.viewport.scrollTop;let i=r;this.top||n.height>t.height?i+=n.top-t.top:n.top<t.top?i-=t.top-n.top:n.bottom>t.bottom&&(i+=n.bottom-t.bottom),e.isNumber(this.snap)&&i<this.snap&&n.top<.5*t.height&&(i=0),i!==r&&this.viewport.scrollTo({...this.options,top:i})}getViewportRect(){return up.viewport.isRoot(this.viewport)?new up.Rect({left:0,top:0,width:up.viewport.rootWidth(),height:up.viewport.rootHeight()}):up.Rect.fromElement(this.viewport)}addPadding(t){t.top-=this.padding,t.height+=2*this.padding}selectObstructions(n){let r=up.fragment.all(n.join(","),{layer:this.obstructionsLayer});return e.filter(r,t.isVisible)}substractObstructions(t){for(let e of this.selectObstructions(this.topObstructions)){let n=up.Rect.fromElement(e).bottom-t.top;n>0&&(t.top+=n,t.height-=n)}for(let e of this.selectObstructions(this.bottomObstructions)){let n=up.Rect.fromElement(e),r=t.bottom-n.top;r>0&&(t.height-=r)}}}},8720:()=>{const t=up.util;up.Selector=class{constructor(t,e=[]){this.selectors=t,this.filters=e,this.unionSelector=this.selectors.join(",")||"match-none"}matches(t){return t.matches(this.unionSelector)&&this.passesFilter(t)}closest(t){let e;return this.matches(t)?t:(e=t.parentElement)?this.closest(e):void 0}passesFilter(e){return t.every(this.filters,(t=>t(e)))}descendants(e){const n=t.flatMap(this.selectors,(t=>e.querySelectorAll(t)));return t.filter(n,(t=>this.passesFilter(t)))}subtree(t){const e=[];return t instanceof Document||!this.matches(t)||e.push(t),e.push(...this.descendants(t)),e}}},7885:()=>{const t=up.util,e=up.element;up.Tether=class{constructor(t){up.migrate.handleTetherOptions?.(t),this.anchor=t.anchor,this.align=t.align,this.position=t.position,this.alignAxis="top"===this.position||"bottom"===this.position?"horizontal":"vertical",this.viewport=up.viewport.get(this.anchor),this.parent=this.viewport===e.root?document.body:this.viewport,this.syncOnScroll=!this.viewport.contains(this.anchor.offsetParent)}start(t){this.element=t,this.element.style.position="absolute",this.setOffset(0,0),this.sync(),this.changeEventSubscription("on")}stop(){this.changeEventSubscription("off")}changeEventSubscription(t){let e=this.scheduleSync.bind(this);up[t](window,"resize",e),this.syncOnScroll&&up[t](this.viewport,"scroll",e)}scheduleSync(){return clearTimeout(this.syncTimer),this.syncTimer=t.task(this.sync.bind(this))}isDetached(){return!this.parent.isConnected||!this.anchor.isConnected}sync(){const n=this.element.getBoundingClientRect(),r=e.styleNumber(this.element,"marginTop"),i=e.styleNumber(this.element,"marginRight"),s=e.styleNumber(this.element,"marginBottom"),o=e.styleNumber(this.element,"marginLeft"),a=this.anchor.getBoundingClientRect();let u,l;switch(this.alignAxis){case"horizontal":switch(this.position){case"top":l=a.top-s-n.height;break;case"bottom":l=a.top+a.height+r}switch(this.align){case"left":u=a.left+o;break;case"center":u=a.left+.5*(a.width-n.width);break;case"right":u=a.left+a.width-n.width-i}break;case"vertical":switch(this.align){case"top":l=a.top+r;break;case"center":l=a.top+.5*(a.height-n.height);break;case"bottom":l=a.top+a.height-n.height-s}switch(this.position){case"left":u=a.left-i-n.width;break;case"right":u=a.left+a.width+o}}t.isDefined(u)||t.isDefined(l)?this.moveTo(u,l):up.fail("Invalid tether constraints: %o",this.describeConstraints())}describeConstraints(){return{position:this.position,align:this.align}}moveTo(t,e){const n=this.element.getBoundingClientRect();this.setOffset(t-n.left+this.offsetLeft,e-n.top+this.offsetTop)}setOffset(t,n){this.offsetLeft=t,this.offsetTop=n,e.setStyle(this.element,{left:t,top:n})}}},4818:()=>{const t=up.util;up.URLPattern=class{constructor(e,n=t.normalizeURL){this.normalizeURL=n,this.groups=[];const r=[],i=[];for(let n of t.parseTokens(e))"-"===n[0]?i.push(n.substring(1)):r.push(n);this.positiveRegexp=this.buildRegexp(r,!0),this.negativeRegexp=this.buildRegexp(i,!1)}buildRegexp(e,n){if(!e.length)return;let r=(e=e.map((e=>("*"===e[0]&&(e="/"+e),e=this.normalizeURL(e),t.escapeRegExp(e))))).join("|");return r=r.replace(/\\\*/g,".*?"),r=r.replace(/(:|\\\$)([a-z][\w-]*)/gi,((t,e,r)=>"\\$"===e?(n&&this.groups.push({name:r,cast:Number}),"(\\d+)"):(n&&this.groups.push({name:r,cast:String}),"([^/?#]+)"))),new RegExp("^(?:"+r+")$")}test(t,e=!0){return e&&(t=this.normalizeURL(t)),this.positiveRegexp.test(t)&&!this.isExcluded(t)}recognize(t,e=!0){e&&(t=this.normalizeURL(t));let n=this.positiveRegexp.exec(t);if(n&&!this.isExcluded(t)){const t={};return this.groups.forEach(((e,r)=>{let i=n[r+1];if(i)return t[e.name]=e.cast(i)})),t}}isExcluded(t){return this.negativeRegexp?.test(t)}}},9675:(t,e,n)=>{n(1860),up.element=function(){const t=up.util;function e(...t){const e=t.pop();return(t[0]||document).querySelector(e)}function n(t,e){const n=[];return t.matches(e)&&n.push(t),n.push(...t.querySelectorAll(e)),n}function r(...n){const r=n.pop();return t.isElement(r)?r:t.isString(r)?e(...n,r):t.isList(r)?(r.length>1&&up.fail("up.element.get(): Cannot cast multiple elements (%o) to a single element",r),r[0]):r}function i(...e){return t.flatMap(e,s)}function s(e){return t.isString(e)?document.querySelectorAll(e):t.wrapList(e)}function o(t){t.setAttribute("hidden","")}function a(t){t.removeAttribute("hidden"),"none"===t.style.display&&(t.style.display="")}function u(e,n){for(let r in n){const i=n[r];t.isGiven(i)?e.setAttribute(r,i):e.removeAttribute(r)}}function l(e,n){let r,i,s,{includePath:o}=c(e);for(let t of o){let{tagName:e,id:n,classNames:o,attributes:a}=t;e&&"*"!==e||(e="div"),i=document.createElement(e),r||(r=i),n&&(i.id=n);for(let t of o)i.classList.add(t);for(let t in a){let e=a[t];i.setAttribute(t,e||"")}s?.appendChild(i),s=i}if(n){let e;if(e=t.pluckKey(n,"class"))for(let n of t.wrapList(e))r.classList.add(n);(e=t.pluckKey(n,"style"))&&R(r,e),(e=t.pluckKey(n,"text"))&&(r.textContent=e),(e=t.pluckKey(n,"content"))&&(r.innerHTML=e),u(r,n)}return r}function c(t){let e;const n=t.replace(/:not\([^)]+\)/,(function(t){return e=t,""})),[r,i]=function(t){let e=[];return[t=h(t,(function({name:t,value:n}){return e.push(n),`[${t}]`})),e]}(n);return{includePath:r.split(/[ >]+/).map((function(e){let n={tagName:null,classNames:[],id:null,attributes:{}};return e=(e=(e=e.replace(/^[\w-*]+/,(function(t){return n.tagName=t,""}))).replace(/#([\w-]+)/,(function(t,e){return n.id=e,""}))).replace(/\.([\w-]+)/g,(function(t,e){return n.classNames.push(e),""})),i.length&&(e=h(e,(function({name:t}){return n.attributes[t]=i.shift(),""}))),e&&up.fail("Cannot parse selector: "+t),n})),includeRaw:n,excludeRaw:e}}const p=/\[([\w-]+)(?:([~|^$*]?=)(["'])?([^\3\]]*?)\3)?]/g;function h(t,e){return t.replace(p,(function(t,n,r,i,s){return s&&(s=s.replace(/\\([\\"'])/,"$1")),e({name:n,operator:r,quote:i,value:s})}))}const d=["HTML","BODY","HEAD","TITLE"],f=up.mockable((t=>t.matches(d.join(","))));function m(e,n){return t.isGiven(n)?`[${e}="${n=n.replace(/"/g,'\\"')}"]`:`[${e}]`}function g(t){t.offsetHeight}function y(e,n,r){t.isMissing(e.getAttribute(n))&&e.setAttribute(n,r)}function b(e,n){return t.nullToUndefined(e.getAttribute(n))}function v(t,e,n){if(!t.hasAttribute(e))return;const r=b(t,e);switch(r){case"false":return!1;case"true":case"":case e:return!0;default:return!n||r}}function w(t,e){const n=S(t,Object.keys(e));return R(t,e),()=>R(t,n)}function k(t,e){return C(window.getComputedStyle(t),e)}function E(e,n){const r=k(e,n);if(t.isGiven(r))return parseFloat(r)}function S(t,e){const{style:n}=t;return C(n,e)}function C(e,n){return t.isString(n)?e[n]:t.pick(e,n)}function R(e,n){if(t.isString(n))e.setAttribute("style",n);else{const{style:t}=e;for(let e in n){let r=n[e];r=x(e,r),t[e]=r}}}function x(e,n){var r;return t.isMissing(n)?n="":F.has(e.toLowerCase().replace(/-/,""))&&(r=n,n=t.isNumber(r)||t.isString(r)&&/^\d+$/.test(r)?r.toString()+"px":r),n}const F=new Set(["top","right","bottom","left","padding","paddingtop","paddingright","paddingbottom","paddingleft","margin","margintop","marginright","marginbottom","marginleft","borderwidth","bordertopwidth","borderrightwidth","borderbottomwidth","borderleftwidth","width","height","maxwidth","maxheight","minwidth","minheight"]);function A(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}return{subtree:n,contains:function(t,e){const n=r(e);return Node.prototype.contains.call(t,n)},closestAttr:function(t,e,n=b){let r=t.closest("["+e+"]");if(r)return n(r,e)},ancestor:function t(e,n){let r=e.parentElement;if(r)return r.matches(n)?r:t(r,n)},around:function(t,e){return i(t.closest(e),n(t,e))},get:r,list:i,toggle:function(t,e){null==e&&(e=!A(t)),(e?a:o)(t)},hide:o,show:a,metaContent:function(t){const n="meta"+m("name",t);return e(n)?.getAttribute("content")},insertBefore:function(t,e){t.insertAdjacentElement("beforebegin",e)},createFromSelector:l,setAttrs:u,setTemporaryAttrs:function(t,e){const n={};for(let r of Object.keys(e))n[r]=t.getAttribute(r);return u(t,e),()=>u(t,n)},affix:function(e,...n){let r,i;const s=t.extractOptions(n);2===n.length?[r,i]=n:(r="beforeend",i=n[0]);const o=l(i,s);return e.insertAdjacentElement(r,o),o},idSelector:function(t){return t.match(/^[a-z0-9\-_]+$/i)?`#${t}`:m("id",t)},classSelector:function(t){return`.${t=t.replace(/[^\w-]/g,"\\$&")}`},isSingleton:f,attrSelector:m,tagName:function(t){return t.tagName.toLowerCase()},createBrokenDocumentFromHTML:function(t){return(new DOMParser).parseFromString(t,"text/html")},fixScriptish:function(t){let e=document.createElement(t.tagName);for(let{name:n,value:r}of t.attributes)e.setAttribute(n,r);e.textContent=t.innerHTML,t.replaceWith(e)},createFromHTML:function(t){const e=document.createRange();e.setStart(document.body,0);let n=e.createContextualFragment(t.trim()).childNodes;if(1!==n.length)throw new Error("HTML must have a single root element");return n[0]},get root(){return document.documentElement},paint:g,concludeCSSTransition:function(t){const e=w(t,{transition:"none"});return g(t),e},hasCSSTransition:function(e){let n;n=t.isOptions(e)?e:k(e);const r=n.transitionProperty,i=n.transitionDuration;return!("none"===r||"all"===r&&0===i)},fixedToAbsolute:function(t){const e=t.getBoundingClientRect();t.style.position="absolute";const n=t.offsetParent.getBoundingClientRect();R(t,{left:e.left-E(t,"margin-left")-n.left,top:e.top-E(t,"margin-top")-n.top,right:"",bottom:""})},setMissingAttrs:function(t,e){for(let n in e)y(t,n,e[n])},setMissingAttr:y,unwrap:function(e){!function(n){const r=document.activeElement;try{return function(){const n=e.parentNode,r=t.toArray(e.childNodes);t.each(r,(t=>n.insertBefore(t,e))),n.removeChild(e)}()}finally{r&&r!==document.activeElement&&r.focus({preventScroll:!0})}}()},wrapChildren:function(t){let e;const n=document.createElement("up-wrapper");for(;e=t.firstChild;)n.appendChild(e);return t.appendChild(n),n},isWrapper:function(t){return t.matches("up-wrapper")},attr:b,booleanAttr:v,numberAttr:function(t,e){let n=t.getAttribute(e);if(n&&(n=n.replace(/_/g,""),n.match(/^[\d.]+$/)))return parseFloat(n)},jsonAttr:function(t,e){let n=t.getAttribute?.(e)?.trim();if(n)return JSON.parse(n)},callbackAttr:function(e,n,{exposedKeys:r=[],mainKey:i="event"}={}){let s=e.getAttribute(n);if(s){const n=up.NonceableCallback.fromString(s).toFunction(i,...r);return function(i){const s=Object.values(t.pick(i,r));return n.call(e,i,...s)}}},booleanOrStringAttr:function(t,e){return v(t,e,!0)},setTemporaryStyle:w,style:k,styleNumber:E,inlineStyle:S,setStyle:R,isVisible:A,upAttrs:function(t){const e=/^up-/,n={};for(let r of t.attributes){const{name:t}=r;t.match(e)&&(n[t]=r.value)}return n},toggleAttr:function(t,e,n,r){return null==r&&(r=!t.hasAttribute(e)),r?t.setAttribute(e,n):t.removeAttribute(e)},addTemporaryClass:function(t,e){return t.classList.add(e),()=>t.classList.remove(e)},setTemporaryAttr:function(t,e,n){return t.setAttribute(e,n),()=>t.removeAttribute(t,e)},cleanJQuery:function(t){up.browser.canJQuery()&&jQuery(t).remove()},parseSelector:c}}()},3924:()=>{up.error=function(){function t(t){return!("object"==typeof t&&("AbortError"===t.name||t instanceof up.RenderResult||t instanceof up.Response))}function e(e){if(t(e))throw e}return{fail:function(...t){throw new up.Error(t)},rethrowCritical:e,isCritical:t,muteUncriticalRejection:function(t){return t.catch(e)},muteUncriticalSync:function(t){try{return t()}catch(t){e(t)}}}}(),up.fail=up.error.fail},4366:()=>{up.Aborted=class extends up.Error{constructor(t){super(t,{name:"AbortError"})}}},5485:()=>{up.CannotCompile=class extends up.Error{}},8010:()=>{up.CannotMatch=class extends up.Error{}},4861:()=>{up.CannotParse=class extends up.Error{}},3469:()=>{up.CannotTarget=class extends up.Error{}},376:()=>{up.Error=class extends window.Error{constructor(t,e={}){Array.isArray(t)&&(t=up.util.sprintf(...t)),super(t);let n="up."+this.constructor.name;Object.assign(this,{name:n},e)}}},8272:()=>{up.NotImplemented=class extends up.Error{}},4504:()=>{up.Offline=class extends up.Error{}},8670:()=>{up.event=function(){const t=up.util,e=up.element;function n(...t){return r(t).bind()}function r(t,e){return up.EventListenerGroup.fromBindArgs(t,e)}function i(t){return up.EventEmitter.fromEmitArgs(t)}const s=["metaKey","shiftKey","ctrlKey","altKey"];function o(e){return(t.isUndefined(e.button)||0===e.button)&&!t.some(s,(t=>e[t]))}function a(e,n,r=[]){const i=up.event.build(n,t.pick(e,r));return i.originalEvent=e,["stopPropagation","stopImmediatePropagation","preventDefault"].forEach((function(t){const n=i[t];return i[t]=function(){return e[t](),n.call(i)}})),e.defaultPrevented&&i.preventDefault(),i}return n("up:click","a[up-emit]",(function(t,n){if(!o(t))return;const r=e.attr(n,"up-emit"),i=e.jsonAttr(n,"up-emit-props"),s=a(t,r);Object.assign(s,i),up.emit(n,s)})),n("up:framework:reset",(function(){for(let t of[window,document,e.root,document.body])for(let e of up.EventListener.allNonDefault(t))e.unbind()})),{on:n,off:function(...t){return r(t).unbind()},build:function(...e){const n=t.extractOptions(e),r=e[0]||n.type||up.fail("Expected event type to be passed as string argument or { type } property"),i=document.createEvent("Event");return i.initEvent(r,!0,!0),Object.assign(i,t.omit(n,["type","target"])),i},emit:function(...t){return i(t).emit()},assertEmitted:function(...t){return i(t).assertEmitted()},onEscape:function(t){return n("keydown",(function(e){if("Escape"===e.key)return t(e)}))},halt:function(t,e={}){e.log&&up.log.putsEvent(t),t.stopImmediatePropagation(),t.preventDefault()},isUnmodified:o,fork:a,keyModifiers:s}}(),up.on=up.event.on,up.off=up.event.off,up.emit=up.event.emit},454:()=>{up.feedback=function(){const t=up.util,e=up.element,n=new up.Config((()=>({currentClasses:["up-current"],navSelectors:["[up-nav]","nav"]}))),r="a, [up-href]";function i(){return n.navSelectors.join(",")}function s(e){if(e)return t.normalizeURL(e,{trailingSlash:!1,hash:!1})}function o(t){return t.upFeedbackURLs||(t.upFeedbackURLs=new up.LinkFeedbackURLs(t))}function a(n,s){const o=up.fragment.subtree(n,i(),s);l(t.flatMap(o,(t=>e.subtree(t,r))),s)}function u(t){return t.feedbackLocation||s(t.location)}function l(t,r={}){if(!t.length)return;let i=u(r.layer||up.layer.get(t[0]));if(i)for(let r of t){const t=o(r).isCurrent(i);for(let e of n.currentClasses)r.classList.toggle(e,t);e.toggleAttr(r,"aria-current","page",t)}}function c(t){const e=t.feedbackLocation,n=u(t.location);e&&e===n||(t.feedbackLocation=n,a(t.element,{layer:t}))}return up.on("up:location:changed",(t=>{!function(){const t=up.layer.front;t.showsLiveHistory()&&c(t)}()})),up.on("up:fragment:inserted",((t,e)=>{!function(t){const e={layer:up.layer.get(t)};up.fragment.closest(t,i(),e)?l(up.fragment.subtree(t,r,e),e):a(t,e)}(e)})),up.on("up:layer:location:changed",(t=>{c(t.layer)})),up.on("up:framework:reset",(function(){n.reset(),up.layer.root.feedbackLocation=null})),{config:n,showAroundRequest:function(n,i){if(!i.feedback)return;let s=e=>t.always(n,e),o=function(t){let n=t.origin;if(n)return i=n,e.ancestor(i,r)||i;var i}(n);o&&s(e.addTemporaryClass(o,"up-active"));for(let t of n.fragments)s(e.addTemporaryClass(t,"up-loading"))},normalizeURL:s}}()},2851:()=>{up.form=function(){const t=up.util,e=up.element,n=["[up-submit]","[up-target]","[up-layer]","[up-transition]"],r=new up.Config((()=>({groupSelectors:["[up-form-group]","fieldset","label","form"],fieldSelectors:["select","input:not([type=submit]):not([type=image])","button[type]:not([type=submit])","textarea"],submitSelectors:up.link.combineFollowableSelectors(["form"],n),noSubmitSelectors:["[up-submit=false]","[target]"],submitButtonSelectors:["input[type=submit]","input[type=image]","button[type=submit]","button:not([type])"],watchInputEvents:["input","change"],watchInputDelay:0,watchChangeEvents:["change"]})));function i(){return r.submitSelectors.join(",")}function s(t=""){return r.fieldSelectors.map((e=>e+t)).join(",")}function o(t){return t.matches(s())}function a(n){n=e.get(n);let r=e.subtree(n,s());if(n.matches("form[id]")){const i=s(e.attrSelector("form",n.getAttribute("id"))),o=up.fragment.all(i,{layer:n});r.push(...o),r=t.uniq(r)}return r}function u(t){return e.subtree(t,l())}function l(){return r.submitButtonSelectors.join(",")}const c=up.mockable(((t,e)=>up.render(p(t,e))));function p(t,e,n){e=m(t=R(t),e,n);let r=new up.OptionsParser(t,e,n);return r.string("failTarget",{default:up.fragment.tryToTarget(t)}),r.booleanOrString("disable"),e.guardEvent||(e.guardEvent=up.event.build("up:form:submit",{submitButton:e.submitButton,log:"Submitting form",params:e.params})),e.origin||(e.origin=up.viewport.focusedElementWithin(t)||e.submitButton||t),Object.assign(e,up.link.followOptions(t,e,n)),e}function h(t){let e,n=document.activeElement,r=[...a(t),...u(t)];for(let t of r)t===n&&(e=v(n)),d(t);return e&&up.focus(e,{force:!0,preventScroll:!0}),function(){r.forEach(f)}}function d(t){t.upDisableCount||(t.upDisableCount||(t.upDisableCount=0),t.upOriginalDisabled=t.disabled),t.upDisableCount++,t.disabled=!0}function f(t){t.upDisableCount&&(t.disabled?(t.upDisableCount--,t.upDisableCount||(t.disabled=t.upOriginalDisabled)):t.upDisableCount=0)}function m(n,r,i){r=t.options(r),n=R(n);const s=new up.OptionsParser(n,r,i);s.string("contentType",{attr:["enctype","up-content-type"]}),s.json("headers");const o=up.Params.fromForm(n),a=function(t){const n=l(),r=document.activeElement;return r&&r.form===t&&r.matches(n)?r:e.get(t,n)}(n);return a&&(r.submitButton=a,o.addField(a),r.method||(r.method=a.getAttribute("formmethod")),r.url||(r.url=a.getAttribute("formaction"))),o.addAll(r.params),r.params=o,s.string("url",{attr:"action",default:up.fragment.source(n)}),s.string("method",{attr:["up-method","data-method","method"],default:"GET",normalize:t.normalizeMethod}),"GET"===r.method&&(r.url=up.Params.stripURL(r.url)),r}function g(e,...n){let r=R(e);const i=a(e),s=t.reject(i,"name");s.length&&up.puts("up.watch()","Will not watch fields without a [name]: %o",s);const o=t.extractCallback(n)||function(t){let e=t.getAttribute("up-watch");if(e)return up.NonceableCallback.fromString(e).toFunction("value","name").bind(t)}(e)||up.fail("No callback given for up.watch()");let u=t.extractOptions(n);const l=new up.FieldWatcher(r,i,u,o);return l.start(),()=>l.stop()}function y(t,e){return g(t,e,((e,n,r)=>c(t,r)))}function b(){return up.migrate.migratedFormGroupSelectors?.()||r.groupSelectors}function v(t){return w(t).element}function w(e){return t.findResult(b(),(function(t){let n=e.closest(t);if(n){let r=up.fragment.tryToTarget(n),i=up.fragment.tryToTarget(e),s=r||i&&n!==e&&`${t}:has(${i})`;if(s)return{target:s,element:n,origin:e}}}))}function k(n){let r,i;if(n.matches("input[type=checkbox]"))n.checked?(r=n.value,i=":checked"):i=":unchecked";else if(n.matches("input[type=radio]")){const t=x(n),s=n.getAttribute("name"),o=t.querySelector(`input[type=radio]${e.attrSelector("name",s)}:checked`);o?(i=":checked",r=o.value):i=":unchecked"}else r=n.value;const s=[];return t.isPresent(r)?(s.push(r),s.push(":present")):s.push(":blank"),t.isPresent(i)&&s.push(i),s}function E(t,e={}){const n=e.target||e.target||t.getAttribute("up-switch"),r=x(t);n||up.fail("No switch target given for %o",t);const i=k(t);for(let t of up.fragment.all(r,n))S(t,i)}up.on("up:click",l,(function(t,e){const n=R(e);n&&F(n)&&e.focus()}));const S=up.mockable((function(n,r){let i;r||(r=k(function(e){const n=x(e).querySelectorAll("[up-switch]");return t.find(n,(function(t){const n=t.getAttribute("up-switch");return e.matches(n)}))||up.fail("Could not find [up-switch] field for %o",e)}(n)));let s=n.getAttribute("up-hide-for");if(s)s=C(s),i=0===t.intersect(r,s).length;else{let e=n.getAttribute("up-show-for");e=e?C(e):[":present",":checked"],i=t.intersect(r,e).length>0}e.toggle(n,i),n.classList.add("up-switched")}));function C(e){return t.parseTokens(e,{json:!0})}function R(t,e={}){const n=up.fragment.get(t,e);return n.form||n.closest("form")}function x(t,e){return R(t,e)||up.layer.get(t).element}function F(t){return(t=up.fragment.get(t)).matches(i())&&!A(t)}function A(t){return t.matches(r.noSubmitSelectors.join(","))}return up.on("submit",i,(function(t,e){t.defaultPrevented||A(e)||(up.event.halt(t,{log:!0}),up.error.muteUncriticalRejection(c(e)))})),up.compiler((function(){return r.fieldSelectors.map((t=>`${t}[up-validate], [up-validate] ${t}`)).join(", ")}),(function(t){up.FormValidator.forElement(t).watchContainer(t)})),up.compiler("[up-switch]",(t=>{E(t)})),up.on("change","[up-switch]",((t,e)=>{E(e)})),up.compiler("[up-show-for]:not(.up-switched), [up-hide-for]:not(.up-switched)",(t=>{S(t)})),up.compiler("[up-watch]",(t=>g(t))),up.compiler("[up-autosubmit]",(t=>y(t))),up.on("up:framework:reset",(function(){r.reset()})),{config:r,submit:c,submitOptions:p,destinationOptions:m,watchOptions:function(e,n,r={}){n=t.options(n);let i=new up.OptionsParser(e,n,{...r,closest:!0,attrPrefix:"up-watch-"});i.boolean("feedback"),i.booleanOrString("disable"),i.string("event"),i.number("delay");let s=up.form.config;return"input"===n.event?(n.event=t.evalOption(s.watchInputEvents,e),n.delay??(n.delay=s.watchInputDelay)):"change"===n.event&&(n.event=t.evalOption(s.watchChangeEvents,e)),n.origin||(n.origin=e),n},isSubmittable:F,watch:g,validate:function(...e){let n=function(e,...n){const r=t.extractOptions(n);return r.origin?r.target||(r.target=up.fragment.toTarget(e)):r.origin||(r.origin=up.fragment.get(e)),r}(...e);return up.FormValidator.forElement(n.origin).validate(n)},autosubmit:y,fieldSelector:s,fields:a,isField:o,submitButtons:u,focusedField:function(){return t.presence(document.activeElement,o)},switchTarget:S,disableWhile:function(e,n){let r=function({disable:e,origin:n}){if(!e)return t.noop;let r,i=()=>x(n||void up.fail("Cannot process { disable: '%s' } option without { %s }",e,"origin"));return!0===e?r=[i()]:t.isString(e)&&(r=up.fragment.subtree(i(),e,{origin:n})),t.sequence(r.map(h))}(n);t.always(e,r)},disable:h,group:v,groupSolution:w,groupSelectors:b,get:R}}(),up.submit=up.form.submit,up.watch=up.form.watch,up.autosubmit=up.form.autosubmit,up.validate=up.form.validate},2667:(t,e,n)=>{n(8711);const r=up.util,i=up.element;up.fragment=function(){function t(t){let e=i.tagName(t);if(e.startsWith("up-"))return e}const e=new up.Config((()=>({badTargetClasses:[/^up-/],targetDerivers:["[up-id]","[id]","html","head","body","main","[up-main]",t,"link[rel][type]","link[rel=preload][href]","link[rel=preconnect][href]","link[rel=prefetch][href]","link[rel]","meta[property]","*[name]","form[action]","a[href]","[class]","form"],verifyDerivedTarget:!0,navigateOptions:{cache:"auto",revalidate:"auto",feedback:!0,fallback:!0,focus:"auto",scroll:"auto",history:"auto",peel:!0},matchAroundOrigin:!0,runScripts:!0,autoHistoryTargets:[":main"],autoFocus:["hash","autofocus","main-if-main","keep","target-if-lost"],autoScroll:["hash","layer-if-main"],autoRevalidate:t=>t.expired,skipResponse:n})));function n({response:t,expiredResponse:e}){return!t.text||t.text===e?.text}function s(t,e={}){return t=p(t,e),i.closestAttr(t,"up-source")}function o(t){let e=i.closestAttr(t,"up-time");if(e&&"false"!==e)return/^\d+$/.test(e)&&(e=1e3*Number(e)),new Date(e)}function a(t){let e=i.closestAttr(t,"up-etag");if(e&&"false"!==e)return e}r.delegate(e,["mainTargets"],(()=>up.layer.config.any));const u=up.mockable(((...t)=>{let e=y(t);return new up.RenderJob(e)})),l=up.mockable(((...t)=>{const e=y(t);return u({...e,navigate:!0})}));function c(t){return!t.closest(".up-destroying")}function p(...t){const e=r.extractOptions(t),n=t.pop(),s=t[0];return r.isElementish(n)?i.get(n):s?h(s,n,e):new up.FragmentFinder({selector:n,origin:e.origin,layer:e.layer}).find()}function h(...t){return f(...t)[0]}const d=/:has\(([^)]+)\)$/;function f(...t){const e=r.extractOptions(t);let n=t.pop();const i=t[0];return r.isElement(n)?[n]:r.isList(n)?n:C(n,i,e).descendants(i||document)}function m(t,e,n={}){return(e=C(e,t,n)).subtree(t)}function g(t,e){return r.isElement(e)?i.contains(t,e)&&up.layer.get(t).contains(e):m(t,e).length>0}function y(t){const e=r.parseArgIntoOptions(t,"target");return r.isElement(e.target)&&(e.origin||(e.origin=e.target)),e}const b=/^(onFail|on|fail)?(.+)$/;function v(t,e){return r.presence(t,r.isString)||w(t,e)||function(t){throw new up.CannotTarget(function(t){return`Cannot derive good target selector from a <${i.tagName(t)}> element without identifying attributes. Try setting an [id] or configure up.fragment.config.targetDerivers.`}(t))}(t)}function w(t,n){return r.findResult(e.targetDerivers,(function(s){let o=function(t,e){if(r.isFunction(e))return e(t);if(t.matches(e))try{return function(t,e){let{includePath:n,excludeRaw:r}=up.element.parseSelector(e);if(1!==n.length)throw new up.CannotParse(e);let{tagName:s,id:o,classNames:a,attributes:u}=n[0],l="";"*"===s?l+=i.tagName(t):s&&(l+=s);for(let t of a)l+=i.classSelector(t);o&&(l+=i.idSelector(o));for(let e in u){let n=u[e]||t.getAttribute(e);if("id"===e)l+=i.idSelector(n);else if("class"===e)for(let e of k(t))l+=i.classSelector(e);else l+=i.attrSelector(e,n)}return r&&(l+=r),l}(t,e)}catch(t){if(t instanceof up.CannotParse)return e;throw t}}(t,s);if(o&&function(t,n,r={}){return!n.isConnected||!e.verifyDerivedTarget||up.fragment.get(t,{layer:n,...r})===n}(o,t,n))return o}))}function k(t){return r.filter(t.classList,(t=>!r.some(e.badTargetClasses,(e=>{return n=e,i=t,r.isRegExp(n)?n.test(i):n===i;var n,i}))))}function E(t,{origin:e}={}){return t.replace(/:origin\b/,(function(n){if(e)return v(e);up.fail('Missing { origin } element to resolve "%s" reference (found in %s)',n,t)}))}function S(...t){return(up.migrate.resolveOrigin||E)(...t)}function C(t,e,n={}){const i=[];let s;if(n.destroying||i.push(c),e&&!document.contains(e)||"any"===n.layer)s=up.layer.root;else{n.layer??(n.layer=e);const t=up.layer.getAll(n);i.push((e=>r.some(t,(t=>t.contains(e))))),s=t[0]}let o=up.fragment.expandTargets(t,{...n,layer:s});return o=o.map((function(t){return t=t.replace(d,(function(t,e){return i.push((t=>t.querySelector(e))),""})),t||"*"})),new up.Selector(o,i)}function R(t){return r.parseTokens(t,{separator:"comma"})}return up.on("up:framework:boot",(function(){const{documentElement:t}=document;if(t.setAttribute("up-source",r.normalizeURL(location.href,{hash:!1})),up.hello(t),!up.browser.canPushState())return up.warn("Cannot push history changes. Next fragment update will load in a new page.")})),up.on("up:framework:reset",(function(){e.reset()})),{config:e,reload:function(...t){const e=y(t);e.target||(e.target=":main");const n=p(e.target,e);return e.url||(e.url=s(n)),e.headers=r.merge(e.headers,function(t){let e={},n=o(t);n&&(e["If-Modified-Since"]=n.toUTCString());let r=a(t);return r&&(e["If-None-Match"]=r),e}(n)),(e.keepData||i.booleanAttr(n,"up-keep-data"))&&(e.data=up.data(n)),up.migrate.postprocessReloadOptions?.(e),u(e)},destroy:function(...t){const e=y(t);return(e.element=p(e.target,e))&&new up.Change.DestroyFragment(e).execute(),up.migrate.formerlyAsync?.("up.destroy()")},render:u,navigate:l,get:p,getDumb:h,all:f,subtree:m,contains:g,closest:function(t,e,n){return(e=C(e,t=i.get(t),n)).closest(t)},source:s,visit:function(t,e){return l({...e,url:t})},markAsDestroying:function(t){t.classList.add("up-destroying"),t.setAttribute("aria-hidden","true")},emitInserted:function(t){return up.emit(t,"up:fragment:inserted",{log:["Inserted fragment %o",t]})},emitDestroyed:function(t,e){const n=e.log??["Destroyed fragment %o",t],r=e.parent||document;return up.emit(r,"up:fragment:destroyed",{fragment:t,parent:r,log:n})},emitKeep:function(t){return function(t,e,n){const r=t.oldElement,i=up.event.build("up:fragment:keep",{newFragment:t.newElement,newData:t.newData});return up.emit(r,i,n)}(t,0,{log:["Keeping fragment %o",t.oldElement],callback:i.callbackAttr(t.oldElement,"up-on-keep",{exposedKeys:["newFragment","newData"]})})},successKey:function(t){let e=b.exec(t);if(e){let[t,n,i]=e;switch(n){case"onFail":return"on"+r.upperCaseFirst(i);case"fail":return r.lowerCaseFirst(i)}}},failKey:function(t){let e=b.exec(t);if(e){let[t,n,i]=e;switch(n){case"on":return"onFail"+r.upperCaseFirst(i);case void 0:return"fail"+r.upperCaseFirst(i)}}},expandTargets:function(t,e={}){const{layer:n}=e;"new"===n||n instanceof up.Layer||up.fail("Must pass an up.Layer as { layer } option, but got %o",n),t=r.copy(r.wrapList(t));const i=[];for(;t.length;){const s=t.shift();if(":main"===s||!0===s){const r="new"===n?e.mode:n.mode;t.unshift(...up.layer.mainTargets(r))}else":layer"===s?"new"===n||n.opening||t.unshift(n.getFirstSwappableElement()):r.isElementish(s)?i.push(v(s,e)):r.isString(s)&&i.push(S(s,e))}return r.uniq(i)},resolveOrigin:S,toTarget:v,tryToTarget:w,isTargetable:function(t){return!!w(t)},matches:function(t,e,n={}){if(t=i.get(t),r.isElement(e)){let n=w(e);return n&&t.matches(n)}return(e=C(e,t,n)).matches(t)},hasAutoHistory:function(t){return!!g(t,e.autoHistoryTargets)||(up.puts("up.render()","Will not auto-update history because fragment doesn't contain a selector from up.fragment.config.autoHistoryTargets"),!1)},time:o,etag:a,shouldRevalidate:function(t,n,i={}){return t.fromCache&&r.evalAutoOption(i.revalidate,e.autoRevalidate,n)},abort:function(...t){let e,n,i=y(t),{reason:s}=i;if(i.target)n=f(i.target,i),e=t=>t.isPartOfSubtree(n),s||(s="Aborting requests within fragment");else{let t=up.layer.getAll(i);n=r.map(t,"element"),e=e=>r.contains(t,e.layer),s||(s="Aborting requests within "+t.join(", "))}up.network.abort((t=>t.abortable&&e(t)),{...i,reason:s});for(let t of n)up.emit(t,"up:fragment:aborted",{log:!1})},onAborted:function(t,...e){let n=r.extractCallback(e),i=r.extractOptions(e),s=up.on("up:fragment:aborted",{guard:e=>e.target.contains(t)||i.around&&t.contains(e.target)},n);return up.destructor(t,s),s},splitTarget:R,parseTargetSteps:function(t,e={}){let n=e.defaultPlacement||"swap",r=[],i=R(t);for(let t of i){if(":none"===t)continue;let i=n,s=!1;t=t.replace(/\b::?(before|after)\b/,((t,e)=>(i=e,""))),t=t.replace(/\b:maybe\b/,(()=>(s=!0,"")));const o={...e,selector:t,placement:i,maybe:s};r.push(o)}return r},isAlive:function(t){return t.isConnected&&c(t)},targetForSteps:function(t){return r.map(t,"selector").join(", ")||":none"},compressNestedSteps:function(t){let e=r.uniqBy(t,"oldElement");return e=r.reject(e,(t=>function(t,e){return r.some(t,(function(t){return t!==e&&("swap"===t.placement||"content"===t.placement)&&t.oldElement.contains(e.oldElement)}))}(e,t))),e}}}(),up.reload=up.fragment.reload,up.destroy=up.fragment.destroy,up.render=up.fragment.render,up.navigate=up.fragment.navigate,up.visit=up.fragment.visit,r.delegate(up,["context"],(()=>up.layer.current))},9634:()=>{up.framework=function(){let t="evaling";function e(){if("configuring"!==t)return void console.error("Unpoly has already booted");let e=n();e?console.error("Unpoly cannot boot: %s",e):(t="booting",up.emit("up:framework:boot",{log:!1}),t="booted",up.emit("up:framework:booted",{log:!1}))}function n(){for(let t of["URL","Proxy","Promise","DOMParser","FormData"])if(!window[t])return`Browser doesn't support the ${t} API`;if("BackCompat"===document.compatMode)return"Browser is in quirks mode (missing DOCTYPE?)"}return{onEvaled:function(){up.emit("up:framework:evaled",{log:!1}),function(){let t=document.currentScript;return!!t?.async||"manual"===t?.getAttribute("up-boot")||"complete"===document.readyState||void 0}()?console.debug("Call up.boot() after you have configured Unpoly"):document.addEventListener("DOMContentLoaded",e),t="configuring"},boot:e,startExtension:function(){if("configuring"!==t)throw new Error("Unpoly extensions must be loaded before booting");t="evaling"},stopExtension:function(){t="configuring"},reset:function(){up.emit("up:framework:reset",{log:!1})},get evaling(){return"evaling"===t},get booted(){return"booted"===t},get beforeBoot(){return"booting"!==t&&"booted"!==t},isSupported:function(){return!n()}}}(),up.boot=up.framework.boot},8944:()=>{up.history=function(){const t=up.util,e=up.element,n=new up.Config((()=>({enabled:!0,restoreTargets:["body"]})));let r,i;const s={hash:!0};function o(e,n){return n=t.merge(s,n),t.normalizeURL(e,n)}function a(t){return o(location.href,t)}function u(){const t=a();i!==t&&(r=i,i=t)}u();const l={trailingSlash:!1};function c(e,n){return o(e,n=t.merge(l,n))===a(n)}function p(t,e={}){d("replaceState",t=o(t))&&!1!==e.event&&h({location:t,reason:"replace",log:`Replaced state for ${t}`})}function h(t){let e=up.event.build("up:location:changed",t);up.migrate?.renamedProperty?.(e,"url","location"),up.emit(e)}function d(t,e){if(n.enabled){const n={up:{}};return window.history[t](n,"",e),u(),!0}}function f(t){u();let e=a();h({location:e,reason:"pop",log:`Navigated to history entry ${e}`}),up.viewport.saveFocus({location:r}),up.viewport.saveScroll({location:r}),function(t){if(!t?.up)return void up.puts("popstate","Ignoring a history state not owned by Unpoly");let e=a();up.emit("up:location:restore",{location:e,log:`Restoring location ${e}`}).defaultPrevented||up.render({url:e,target:n.restoreTargets,fail:!1,history:!0,location:e,peel:!0,layer:"root",cache:!0,saveScroll:!1,scroll:["restore","auto"],saveFocus:!1,focus:["restore","auto"]})}(t.state)}function m(){window.addEventListener("popstate",f),"GET"===up.protocol.initialRequestMethod()&&p(a(),{event:!1})}return up.on("up:framework:boot",(function(){"jasmine"in window?m():setTimeout(m,100)})),up.macro("a[up-back], [up-href][up-back]",(function(t){r&&(e.setMissingAttrs(t,{"up-href":r,"up-scroll":"restore"}),t.removeAttribute("up-back"),up.link.makeFollowable(t))})),up.on("up:framework:reset",(function(){n.reset(),r=void 0,i=void 0,u()})),{config:n,push:function(t){!c(t=o(t))&&d("pushState",t)&&h({location:t,reason:"push",log:`Advanced to location ${t}`})},replace:p,get location(){return a()},get previousLocation(){return r},normalizeURL:o,isLocation:c}}()},9443:(t,e,n)=>{n(4432);const r=up.util,i=up.element;up.layer=function(){const t=[up.Layer.Root,up.Layer.Modal,up.Layer.Popup,up.Layer.Drawer,up.Layer.Cover],e=new up.Config((function(){const e={mode:"modal",any:{mainTargets:["[up-main='']","main",":layer"]},root:{mainTargets:["[up-main~=root]"],history:!0},overlay:{mainTargets:["[up-main~=overlay]"],openAnimation:"fade-in",closeAnimation:"fade-out",dismissLabel:"Ã—",dismissAriaLabel:"Dismiss dialog",dismissable:!0,history:"auto"},cover:{mainTargets:["[up-main~=cover]"]},drawer:{mainTargets:["[up-main~=drawer]"],backdrop:!0,position:"left",size:"medium",openAnimation(t){switch(t.position){case"left":return"move-from-left";case"right":return"move-from-right"}},closeAnimation(t){switch(t.position){case"left":return"move-to-left";case"right":return"move-to-right"}}},modal:{mainTargets:["[up-main~=modal]"],backdrop:!0,size:"medium"},popup:{mainTargets:["[up-main~=popup]"],position:"bottom",size:"medium",align:"left",dismissable:"outside key"},foreignOverlaySelectors:["dialog"]};for(let n of t)e[n.mode].Class=n;return e}));let n=null,s=[];function o(t){return"root"===t?[e.root,e.any]:[e[t],e.overlay,e.any]}async function a(t){return t=r.options(t,{layer:"new",defaultToEmptyContent:!0,navigate:!0}),(await up.render(t)).layer}up.on("up:fragment:destroyed",(function(){n.sync()})),up.on("up:framework:evaled",(function(){n=new up.LayerStack})),up.on("up:framework:reset",(function(){e.reset(),n.reset(),s=r.filter(s,"isDefault")}));const u={config:e,mainTargets:function(t){return r.flatMap(o(t),"mainTargets")},open:a,build:function(t,i){const{mode:s}=t,{Class:a}=e[s],u=r.reverse(o(s));let l=up.migrate.handleLayerConfig;return l&&u.forEach(l),t.openAnimation??(t.openAnimation=r.pluckKey(t,"animation")),t=r.mergeDefined(...u,{mode:s,stack:n},t),i&&(t=i(t)),new a(t)},ask:function(t){return new Promise((function(e,n){a(t={...t,onAccepted:t=>e(t.value),onDismissed:t=>n(t.value)})}))},normalizeOptions:function(t){if(up.migrate.handleLayerOptions?.(t),r.isGiven(t.layer)){let n=String(t.layer).match(/^(new|shatter|swap)( (\w+))?/);if(n){t.layer="new";const r=n[1],i=n[3];t.mode||(t.mode=i||e.mode),"swap"===r?up.layer.isOverlay()&&(t.baseLayer="parent"):"shatter"===r&&(t.baseLayer="root")}}else t.mode?t.layer="new":r.isElementish(t.target)?t.layer=n.get(t.target,{normalizeLayerOptions:!1}):t.origin?t.layer="origin":t.layer="current";t.context||(t.context={}),t.baseLayer=n.get("current",{...t,normalizeLayerOptions:!1})},openCallbackAttr:function(t,e){return i.callbackAttr(t,e,{exposedKeys:["layer"]})},closeCallbackAttr:function(t,e){return i.callbackAttr(t,e,{exposedKeys:["layer","value","response"]})},anySelector:function(){return r.map(t,(t=>t.selector())).join(",")},optionToString:function(t){return r.isString(t)?`layer "${t}"`:t.toString()},get stack(){return n},isWithinForeignOverlay:function(t){let n=e.foreignOverlaySelectors.join(",");return!(!n||!t.closest(n))}};return r.delegate(u,["get","getAll","root","overlays","current","front","sync","count","dismissOverlays"],(()=>n)),r.delegate(u,["accept","dismiss","isRoot","isOverlay","isFront","on","off","emit","parent","history","location","mode","context","element","contains","size","affix"],(()=>n.current)),u}()},3849:(t,e,n)=>{n(2065),up.link=function(){const t=up.util,e=up.element,n=new up.LinkPreloader;let r=null;const i=["a[up-content]","a[up-fragment]","a[up-document]"],s=["a[href]","[up-href]"],o=["[up-follow]","[up-target]","[up-layer]","[up-transition]","[up-preload]","[up-instant]","[up-href]"];function a(e,n){return t.flatMap(e,(t=>n.map((e=>t+e))))}const u=new up.Config((()=>({followSelectors:a(s,o).concat(i),noFollowSelectors:["[up-follow=false]","a[download]","a[target]",'a[href^="#"]:not([up-content]):not([up-fragment]):not([up-document])','a[href^="javascript:"]'],instantSelectors:["[up-instant]"],noInstantSelectors:["[up-instant=false]","[onclick]"],preloadSelectors:a(s,["[up-preload]"]),noPreloadSelectors:["[up-preload=false]"],clickableSelectors:i.concat(["[up-emit]","[up-accept]","[up-dismiss]","[up-clickable]"]),preloadDelay:90,preloadEnabled:"auto"})));function l(){return u.followSelectors.join(",")}function c(){return u.preloadSelectors.join(",")}function p(e){return e.matches(u.noFollowSelectors.join(","))||t.isCrossOrigin(e)}const h=up.mockable((function(t,e){return up.render(f(t,e))}));function d(e,n,r){n=t.options(n);const i=new up.OptionsParser(e,n,r);return n.url=function(t,e={}){const n=e.url||t.getAttribute("up-href")||t.getAttribute("href");if("#"!==n)return n}(e,n),n.method=g(e,n),i.json("headers"),i.json("params"),i.booleanOrString("cache"),i.booleanOrString("expireCache"),i.booleanOrString("evictCache"),i.booleanOrString("revalidate"),i.booleanOrString("abort"),i.boolean("abortable"),i.boolean("background"),i.string("contentType"),i.number("badResponseTime"),i.number("timeout"),n}function f(t,e,n){e=d(t=up.fragment.get(t),e,n);const r=new up.OptionsParser(t,e,{fail:!0,...n});return r.boolean("feedback"),r.boolean("fail"),e.origin||(e.origin=t),r.boolean("navigate",{default:!0}),r.string("confirm",{attr:["up-confirm","data-confirm"]}),r.string("target"),r.booleanOrString("fallback"),r.string("content"),r.string("fragment"),r.string("document"),r.boolean("useKeep"),r.boolean("useHungry"),r.callback("onLoaded"),r.callback("onRendered",{mainKey:"result"}),r.callback("onFinished",{mainKey:"result"}),r.callback("onOffline",{mainKey:"error"}),r.callback("onError",{mainKey:"error"}),r.boolean("peel"),r.string("layer"),r.string("baseLayer"),r.json("context"),r.string("mode"),r.string("align"),r.string("position"),r.string("class"),r.string("size"),r.booleanOrString("dismissable"),r.parse(up.layer.openCallbackAttr,"onOpened"),r.parse(up.layer.closeCallbackAttr,"onAccepted"),r.parse(up.layer.closeCallbackAttr,"onDismissed"),r.string("acceptEvent"),r.string("dismissEvent"),r.string("acceptLocation"),r.string("dismissLocation"),r.booleanOrString("history"),r.booleanOrString("focus"),r.boolean("saveScroll"),r.boolean("saveFocus"),r.booleanOrString("scroll"),r.boolean("revealTop"),r.number("revealMax"),r.number("revealPadding"),r.number("revealSnap"),r.string("scrollBehavior"),r.booleanOrString("history"),r.booleanOrString("location"),r.booleanOrString("title"),r.booleanOrString("animation"),r.booleanOrString("transition"),r.string("easing"),r.number("duration"),e.guardEvent||(e.guardEvent=up.event.build("up:link:follow",{log:"Following link"})),e}const m=t.negate(up.network.shouldReduceRequests);function g(e,n={}){return t.normalizeMethod(n.method||e.getAttribute("up-method")||e.getAttribute("data-method"))}function y(t){return(t=up.fragment.get(t)).matches(l())&&!p(t)}function b(t){y(t)||t.setAttribute("up-follow","")}function v(t){t.matches("a[href], button")||(e.setMissingAttrs(t,{tabindex:"0",role:"link","up-clickable":""}),t.addEventListener("keydown",(function(t){if("Enter"===t.key||"Space"===t.key)return E(t)})))}function w(t,e){if(t.defaultPrevented||p(e))return!1;const n=`a, [up-href], ${up.form.fieldSelector()}`,r=t.target.closest(n);return!r||r===e}function k(t){const e=t.closest(u.instantSelectors.join(","));return e&&!((n=e).matches(u.noInstantSelectors.join(","))||p(n));var n}function E(t){let e=["clientX","clientY","button",...up.event.keyModifiers];const n=up.event.fork(t,"up:click",e);up.emit(t.target,n,{log:!1})}function S(t){const e=g(t);return up.network.isSafeMethod(e)}return up.macro((function(){return u.clickableSelectors.join(",")}),v),up.on("up:click",l,(function(t,e){w(t,e)&&(up.event.halt(t,{log:!0}),up.focus(e,{preventScroll:!0}),up.error.muteUncriticalRejection(h(e)))})),up.macro("[up-expand]",(function(t){const n=t.getAttribute("up-expand")||"a, [up-href]";let r=e.get(t,n);if(r){const n=e.upAttrs(r);n["up-href"]||(n["up-href"]=r.getAttribute("href")),e.setMissingAttrs(t,n),b(t)}})),up.compiler(c,(function(t){(function(t){return!up.browser.canPushState()||t.matches(u.noPreloadSelectors.join(","))||p(t)||!function(t){const e=d(t);if(e.url)return null==e.cache&&(e.cache="auto"),e.basic=!0,new up.Request(e).willCache()}(t)})(t)||n.watchLink(t)})),up.on("up:framework:reset",(function(){r=null,u.reset(),n.reset()})),{follow:h,followOptions:f,preload:function(e,n){let r=function(e){return t.evalAutoOption(u.preloadEnabled,m,e)?S(e)?void 0:"Will not preload an unsafe link":"Preloading is disabled"}(e=up.fragment.get(e));if(r)return Promise.reject(new up.Error(r));const i=up.event.build("up:link:preload",{log:["Preloading link %o",e]});return h(e,{abortable:!1,...n,guardEvent:i,preload:!0})},makeFollowable:b,makeClickable:v,isSafe:S,isFollowable:y,shouldFollowEvent:w,followMethod:g,convertClicks:function(t){t.on("click",(function(e,n){if(up.event.isUnmodified(e))return k(n)&&r?up.event.halt(e):t.wasHitByMouseEvent(e)&&(!r||r===e.target)&&E(e),r=null})),t.on("mousedown",(function(t,e){up.event.isUnmodified(t)&&(r=t.target,k(e)&&E(t))}))},config:u,combineFollowableSelectors:a,preloadSelector:c,followSelector:l}}(),up.follow=up.link.follow},4453:()=>{up.log=function(){const t=up.util,e=new up.LogConfig;function n(t,e,n,...i){r(t,e,"",n,...i)}function r(n,r,i,s,...o){s&&(e.format?console[n](`%c${r}%c ${s}`,"color: #666666; padding: 1px 3px; border: 1px solid #bbbbbb; border-radius: 2px; font-size: 90%; display: inline-block;"+i,"",...o):console[n](`[${r}] ${t.sprintf(s,...o)}`))}return up.on("up:framework:boot",(function(){if(!e.banner)return;const t=` __ _____  ___  ___  / /_ __\n/ // / _ \\/ _ \\/ _ \\/ / // /  ${up.version}\n\\___/_//_/ .__/\\___/_/\\_. / \n        / /            / /\n\n`;let n="";up.migrate.loaded||(n+="Load unpoly-migrate.js to enable deprecated APIs.\n\n"),e.enabled?n+="Call `up.log.disable()` to disable logging for this session.":n+="Call `up.log.enable()` to enable logging for this session.";const r="color: #777777";e.format?console.log("%c"+t+"%c"+n,"font-family: monospace;"+r,r):console.log(t+n)})),up.on("up:framework:reset",(function(){e.reset()})),{puts:function(...t){e.enabled&&n("log",...t)},putsEvent:function(t){if(e.enabled){let e="#5566cc";r("log",(t=t.originalEvent||t).type,`color: white; border-color: ${e}; background-color: ${e}`,"Interaction on %o",t.target)}},error:(...t)=>n("error",...t),warn:(...t)=>n("warn",...t),config:e,enable:function(){e.enabled=!0},disable:function(){e.enabled=!1}}}(),up.puts=up.log.puts,up.warn=up.log.warn},6535:()=>{up.migrate={config:{}}},8374:()=>{up.mockable=function(t){if(window.jasmine){let e=t.name,n={[e]:t},r=function(){return n[e].apply(this,arguments)};return r.mock=()=>spyOn(n,e),r}return t}},4034:()=>{up.motion=function(){const t=up.util,e=up.element;let n={},r={};const i=new up.MotionController("motion"),s=new up.Config((()=>({duration:175,easing:"ease",enabled:!matchMedia("(prefers-reduced-motion: reduce)").matches})));function o(e){return t.pickBy(e,(t=>t.isDefault))}function a(){return s.enabled}function u(t,n,r){return c(r),a()&&!y(n)&&r.duration>0&&!e.isSingleton(t)}function l(t,e,n){return n={...n,finishEvent:i.finishEvent},new up.CSSTransition(t,e,n).start()}function c(t){t.easing||(t.easing=s.easing),t.duration||(t.duration=s.duration)}function p(e){if(!y(e)){if(t.isFunction(e))return e;if(t.isArray(e))return h(...e);if(!t.isString(e))return up.fail("Unknown transition %o",e);{let t;if(e.indexOf("/")>=0)return h(...e.split("/"));if(t=r[e])return p(t)}}}function h(e,n){if(!y(e)&&!y(n)){const r=d(e)||t.asyncNoop,i=d(n)||t.asyncNoop;return(t,e,n)=>Promise.all([r(t,n),i(e,n)])}}function d(e){return y(e)?void 0:t.isFunction(e)?e:t.isString(e)?n[r=e]||up.fail("Unknown animation %o",r):t.isOptions(e)?(t,n)=>l(t,e,n):up.fail("Unknown animation %o",e);var r}const f=up.mockable((function(t,e){t.replaceWith(e)}));function m(t,e){const n=p(e);n.isDefault=up.framework.evaling,r[t]=n}function g(t,e){const r=d(e);r.isDefault=up.framework.evaling,n[t]=r}function y(t){return!t||"none"===t}function b(t,n,r){g(t,(function(t,i){return t.style.opacity=0,e.setStyle(t,{opacity:n}),l(t,{opacity:r},i)}))}function v(t,e){return{transform:`translate(${t}px, ${e}px)`}}function w(t){return e.setStyle(t,{transform:null}),t.getBoundingClientRect()}function k(t,n){const r=`move-from-${t}`;g(`move-to-${t}`,(function(t,e){const r=w(t);return l(t,n(r),e)})),g(r,(function(t,r){const i=w(t),s=n(i);return e.setStyle(t,s),l(t,{transform:null},r)}))}return up.on("up:framework:boot",(function(){a()||up.puts("up.motion","Animations are disabled")})),b("fade-in",0,1),b("fade-out",1,0),k("top",(function(t){return v(0,-(t.top+t.height))})),k("bottom",(function(t){return v(0,up.viewport.rootHeight()-t.top)})),k("left",(function(t){return v(-(t.left+t.width),0)})),k("right",(function(t){return v(up.viewport.rootWidth()-t.left,0)})),m("cross-fade",["fade-out","fade-in"]),m("move-left",["move-to-left","move-from-right"]),m("move-right",["move-to-right","move-from-left"]),m("move-up",["move-to-top","move-from-bottom"]),m("move-down",["move-to-bottom","move-from-top"]),up.on("up:framework:reset",(function(){i.reset(),n=o(n),r=o(r),s.reset()})),{morph:function(n,r,s,o){c(o=t.options(o)),n=up.fragment.get(n),r=up.fragment.get(r);const a=p(s),l=u(n,a,o),h=t.pluckKey(o,"beforeStart")||t.noop,d=t.pluckKey(o,"afterInsert")||t.noop,m=t.pluckKey(o,"beforeDetach")||t.noop,g=t.pluckKey(o,"afterDetach")||t.noop,y=t.pluckKey(o,"scrollNew")||t.noop;if(h(),l){if(i.isActive(n)&&!1===o.trackMotion)return a(n,r,o);up.puts("up.morph()","Morphing %o to %o with transition %O",n,r,s);const t=up.viewport.get(n),u=t.scrollTop,l=up.viewport.absolutize(n,{afterMeasure(){e.insertBefore(n,r),d()}}),c=async function(){y();const e=t.scrollTop;l.moveBounds(0,e-u),await a(n,r,o),m(),l.bounds.remove(),g()};return i.startFunction([n,r],c,o)}return m(),f(n,r),d(),g(),y(),Promise.resolve()},animate:function(n,r,s){n=up.fragment.get(n),s=t.options(s);const o=d(r);if(u(n,r,s)){const t=()=>o(n,s);return i.startFunction(n,t,s)}return function(n,r){return t.isOptions(r)&&e.setStyle(n,r),Promise.resolve()}(n,r)},finish:function(t){return i.finish(t)},finishCount:()=>i.finishCount,transition:m,animation:g,config:s,isEnabled:a,isNone:y,willAnimate:u,swapElementsDirectly:f}}(),up.transition=up.motion.transition,up.animation=up.motion.animation,up.morph=up.motion.morph,up.animate=up.motion.animate},1647:(t,e,n)=>{n(35);const r=up.util;up.network=function(){const t=new up.Config((()=>({concurrency:()=>o()?3:6,wrapMethod:!0,cacheSize:70,cacheExpireAge:15e3,cacheEvictAge:54e5,badDownlink:.6,badRTT:750,badResponseTime:400,fail:t=>(t.status<200||t.status>299)&&304!==t.status,autoCache:t=>t.isSafe(),expireCache:(t,e)=>!t.isSafe(),evictCache:!1,progressBar:!0,timeout:9e4}))),e=new up.Request.Queue,n=new up.Request.Cache;let i=null;function s(i){(function(t){let r;if(t.willCache()&&(r=n.get(t)))return up.puts("up.request()","Re-using previous request to %s",t.description),t.background||e.promoteToForeground(r),n.track(r,t,{onIncompatible:s}),!0})(i)||function(i){(function(e){e.willCache()&&(n.put(e),e.onLoading=()=>n.put(e)),r.always(e,(function(i){let s=i.expireCache??e.expireCache??r.evalOption(t.expireCache,e,i);s&&n.expire(s,{except:e});let o=i.evictCache??e.evictCache??r.evalOption(t.evictCache,e,i);o&&n.evict(o,{except:e}),n.get(e)&&n.put(e),i.isCacheable?.()||n.evict(e)}))})(i),e.asap(i)}(i)}function o(){let e=navigator.connection;if(e)return e.rtt&&e.rtt>t.badRTT||e.downlink&&e.downlink<t.badDownlink}function a(...t){up.migrate.preprocessAbortArgs?.(t),e.abort(...t)}return up.on("up:network:late",(function(){r.evalOption(t.progressBar)&&(i=new up.ProgressBar)})),up.on("up:network:recover",(function(){i?.conclude()})),up.on("up:framework:reset",(function(){a(),e.reset(),t.reset(),n.reset(),i?.destroy(),i=null})),{request:function(...t){const e=function(t){const e=r.extractOptions(t);return e.url||(e.url=t[0]),up.migrate.handleRequestOptions?.(e),e}(t),n=new up.Request(e);return s(n),n},cache:n,isBusy:function(){return e.isBusy()},isSafeMethod:function(t){return r.contains(["GET","OPTIONS","HEAD"],r.normalizeMethod(t))},config:t,abort:a,registerAliasForRedirect:function(t,e){if(t.cache&&e.url&&t.url!==e.url){const i=r.variant(t,{method:e.method,url:e.url});n.alias(t,i)}},queue:e,shouldReduceRequests:o,loadPage:function(t){new up.Request(t).loadPage()}}}(),up.request=up.network.request,up.cache=up.network.cache},3535:()=>{up.protocol=function(){const t=up.util,e=up.element,n=function(t){return"X-Up"+t.replace(/(^.|[A-Z])/g,(t=>"-"+t.toUpperCase()))},r=function(e,r,i=t.identity){let s=e.getResponseHeader(n(r));if(s)return i(s)};function i(t){return"false"!==t&&t}const s=t.memoize((function(){return t.normalizeMethod(up.browser.popCookie("_up_method"))})),o=new up.Config((()=>({methodParam:"_method",csrfParam:()=>e.metaContent("csrf-param"),csrfToken:()=>e.metaContent("csrf-token"),cspNonce:()=>e.metaContent("csp-nonce"),csrfHeader:"X-CSRF-Token",nonceableAttributes:["up-watch","up-on-accepted","up-on-dismissed","up-on-loaded","up-on-rendered","up-on-finished","up-on-error","up-on-offlne"]})));function a(){o.reset()}return up.on("up:framework:reset",a),{config:o,reset:a,locationFromXHR:function(t){return r(t,"location")||t.responseURL},titleFromXHR:function(t){return up.migrate.titleFromXHR?.(t)??r(t,"title",JSON.parse)},targetFromXHR:function(t){return r(t,"target")},methodFromXHR:function(e){return r(e,"method",t.normalizeMethod)},acceptLayerFromXHR:function(t){return r(t,"acceptLayer",JSON.parse)},contextFromXHR:function(t){return r(t,"context",JSON.parse)},dismissLayerFromXHR:function(t){return r(t,"dismissLayer",JSON.parse)},eventPlansFromXHR:function(t){return r(t,"events",JSON.parse)},expireCacheFromXHR:function(t){return r(t,"expireCache")||up.migrate.clearCacheFromXHR?.(t)},evictCacheFromXHR:function(t){return r(t,"evictCache",i)},csrfHeader:function(){return t.evalOption(o.csrfHeader)},csrfParam:function(){return t.evalOption(o.csrfParam)},csrfToken:function(){return t.evalOption(o.csrfToken)},cspNonce:function(){return t.evalOption(o.cspNonce)},initialRequestMethod:s,headerize:n,wrapMethod:function(t,e){return e.add(o.methodParam,t),"POST"},cspNoncesFromHeader:function(t){let e=[];if(t){let n=t.split(/\s*;\s*/);for(let t of n)if(0===t.indexOf("script-src")){let n,r=/'nonce-([^']+)'/g;for(;n=r.exec(t);)e.push(n[1])}}return e},influencingHeadersFromResponse:function(e){let n=e.header("Vary");return t.parseTokens(n,{separator:"comma"})}}}()},9615:()=>{up.radio=function(){const t=up.util,e=up.element,n=new up.Config((()=>({hungrySelectors:["[up-hungry]"],pollInterval:3e4,stretchPollInterval:t=>t*(up.network.shouldReduceRequests()?2:1),pollEnabled:"auto"})));return up.compiler("[up-poll]",(function(t){up.fragment.isTargetable(t)?up.FragmentPolling.forFragment(t).onPollAttributeObserved():up.warn("[up-poll]","Ignoring untargetable fragment %o",t)})),up.on("up:framework:reset",(function(){n.reset()})),{config:n,hungrySteps:function({layer:r,history:i,origin:s}){let o=n.hungrySelectors.join(", "),a=up.fragment.all(o,{layer:"any"});return t.filterMap(a,(t=>{let n=up.fragment.tryToTarget(t,{origin:s});if(!n)return void up.warn("[up-hungry]","Ignoring untargetable fragment %o",t);if(e.booleanAttr(t,"up-if-history")&&!i)return;let o=e.attr(t,"up-if-layer"),a=up.layer.get(t);if("any"!==o&&r!==a)return;let u=e.booleanOrStringAttr(t,"up-transition");return{selector:n,oldElement:t,layer:a,origin:s,transition:u,placement:"swap",useKeep:!0,maybe:!0}}))},startPolling:function(t,e={}){up.FragmentPolling.forFragment(t).forceStart(e)},stopPolling:function(t){up.FragmentPolling.forFragment(t).forceStop()},pollIssue:function(t){let e=n.pollEnabled;if(!1===e)return"User has disabled polling";if("auto"===e){if(document.hidden)return"Tab is hidden";if(!up.layer.get(t)?.isFront?.())return"Fragment is on a background layer"}return up.emit(t,"up:fragment:poll",{log:["Polling fragment",t]}).defaultPrevented?"User prevented up:fragment:poll event":void 0}}}()},6774:()=>{!function(){const t=up.element;for(let e of["method","confirm"]){const n=`up-${e}`,r=`data-${e}`;up.macro(`a[${r}]`,(function(e){(window.Rails||window.jQuery?.rails)&&up.link.isFollowable(e)&&(t.setMissingAttr(e,n,e.getAttribute(r)),e.removeAttribute(r))}))}}()},2514:()=>{up.syntax=function(){const t=up.util,e={"[up-back]":-100,"[up-content]":-200,"[up-drawer]":-200,"[up-modal]":-200,"[up-cover]":-200,"[up-popup]":-200,"[up-tooltip]":-200,"[up-dash]":-200,"[up-expand]":-300,"[data-method]":-400,"[data-confirm]":-400};let n=[],r=[];function i(e){let[n,r,i]=function(e){const n=t.extractOptions(e),r=e.shift(),i=e.pop();return[r,{...n,...t.extractOptions(e)},i]}(e);return r=t.options(r,{selector:n,isDefault:up.framework.evaling,priority:0,batch:!1}),Object.assign(i,r)}function s(t,e){let n,r=0;for(;(n=t[r])&&n.priority>=e.priority;)r+=1;if(t.splice(r,0,e),up.framework.booted)if(0===e.priority)for(let t of up.layer.stack)o(t.element,{layer:t,compilers:[e]});else up.puts("up.compiler()","Compiler %s was registered after booting Unpoly. Compiler will run for future fragments only.",e.selector);return e}function o(t,e){let i=e.compilers||r.concat(n);new up.CompilerPass(t,i,e).run()}return up.on("up:framework:reset",(function(){n=t.filter(n,"isDefault"),r=t.filter(r,"isDefault")})),{compiler:function(...t){const e=i(t);return s(n,e)},macro:function(...n){const o=i(n);return up.framework.evaling&&(o.priority||(o.priority=function(n){n=t.evalOption(n);for(let t in e){const r=e[t];if(n.indexOf(t)>=0)return r}}(o.selector)||up.fail("Unregistered priority for system macro %o",o.selector))),s(r,o)},destructor:function(e,n){let r=e.upDestructors;r||(r=[],e.upDestructors=r,e.classList.add("up-can-clean")),t.isArray(n)?r.push(...n):r.push(n)},hello:function(t,e={}){return t=up.fragment.get(t,e),up.puts("up.hello()","Compiling fragment %o",t),o(t,e),up.fragment.emitInserted(t),t},clean:function(t,e={}){new up.DestructorPass(t,e).run()},data:function(e){return(e=up.fragment.get(e)).upData||(e.upData=function(e){if(!e.getAttribute)return{};let n,r=e.getAttribute("up-data");return r&&(n=JSON.parse(r),!t.isOptions(n))?n:{...e.dataset,...n,...e.upCompileData}}(e))}}}(),up.compiler=up.syntax.compiler,up.destructor=up.syntax.destructor,up.macro=up.syntax.macro,up.data=up.syntax.data,up.hello=up.syntax.hello},7924:()=>{up.util=function(){function t(){}const e={host:"cross-domain"};function n(t,n){n=T(n,e);const r=o(t);let i="";"cross-domain"===n.host&&(n.host=s(r)),n.host&&(i+=r.protocol+"//"+r.host);let{pathname:a}=r;return!1===n.trailingSlash&&"/"!==a&&(a=a.replace(/\/$/,"")),i+=a,!1!==n.search&&(i+=r.search),!1!==n.hash&&(i+=r.hash),i}const r=location.protocol,i=location.hostname;function s(t){if(b(t)&&-1===t.indexOf("//"))return!1;const e=o(t);return i!==e.hostname||r!==e.protocol}function o(t){if(t.pathname)return t;let e=document.createElement("a");return e.href=t,e}function a(t){return b(t)?e=>e[t]:t}function u(t,e){if(0===t.length)return[];e=a(e);let n=[],r=0;for(let i of t)n.push(e(i,r++));return n}function l(t,e){let n=0;for(let r of t)e(r,n++)}function c(t){return null===t}function p(t){return void 0===t}const h=Z(p);function d(t){return p(t)||c(t)}const f=Z(d);function m(t){return!!d(t)||(k(t)&&t[m.key]?t[m.key]():b(t)||x(t)?0===t.length:!!w(t)&&0===Object.keys(t).length)}m.key="up.util.isBlank";const g=Z(m);function y(t){return"function"==typeof t}function b(t){return"string"==typeof t||t instanceof String}function v(t){return"number"==typeof t||t instanceof Number}function w(t){return"object"==typeof t&&!c(t)&&(p(t.constructor)||t.constructor===Object)}function k(t){const e=typeof t;return"object"===e&&!c(t)||"function"===e}function E(t){return t instanceof Element}function S(t){return t instanceof RegExp}function C(t){return up.browser.canJQuery()&&t instanceof jQuery}const{isArray:R}=Array;function x(t){return R(t)||function(t){return t instanceof NodeList}(t)||function(t){return"[object Arguments]"===Object.prototype.toString.call(t)}(t)||C(t)||function(t){return t instanceof HTMLCollection}(t)}function F(t){return x(t)?t:d(t)?[]:[t]}function A(t){return k(t)&&t[A.key]?t=t[A.key]():x(t)?t=O(t):w(t)&&(t=Object.assign({},t)),t}function O(t){return Array.prototype.slice.call(t)}function L(...t){return Object.assign({},...t)}function T(t,e){return e?L(e,t):t?A(t):{}}function P(t,e){e=a(e);let n=0;for(let r of t){const t=e(r,n++);if(t)return t}}function q(t,e){e=a(e);let n=!0,r=0;for(let i of t)if(!e(i,r++)){n=!1;break}return n}function D(t){return M(t,f)}function M(t,e){e=a(e);const n=[];return l(t,(function(t,r){if(e(t,r))return n.push(t)})),n}function H(t){return t[t.length-1]}function N(t,e){return t.indexOf(e)>=0}function j(t,e){const n={};for(let r of e)r in t&&(n[r]=t[r]);return n}function B(t,e){e=a(e);const n={};for(let r in t)e(t[r],r,t)&&(n[r]=t[r]);return n}function $(t,...e){return y(t)?t(...e):t}A.key="up.util.copy",Date.prototype[A.key]=function(){return new Date(+this)};const U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};function K(t,e){const n=t[e];return delete t[e],n}function z(t,e){if(e(H(t)))return t.pop()}function V(t){return z(t,w)||{}}function I(t){return t}function W(t){const e=[];for(let n of t)x(n)?e.push(...n):e.push(n);return e}function _(t,e){if(t?.valueOf&&(t=t.valueOf()),e?.valueOf&&(e=e.valueOf()),typeof t!=typeof e)return!1;if(x(t)&&x(e))return X(t,e);if(k(t)&&t[_.key])return t[_.key](e);if(w(t)&&w(e)){const n=Object.keys(t);return!!X(n,Object.keys(e))&&q(n,(n=>_(t[n],e[n])))}return t===e}function X(t,e){return t.length===e.length&&q(t,((t,n)=>_(t,e[n])))}_.key="up.util.isEqual";const G={"space/or":/\s+(?:or\s+)?/,or:/\s+or\s+/,comma:/\s*,\s*/};let J=0;function Q(t,e="%o"){let n;if("%c"===e)return"";if("%s"===e&&f(t)&&(t=t.toString()),b(t))n=t.trim().replace(/[\n\r\t ]+/g," "),"%o"===e&&(n=JSON.stringify(n));else if(p(t))n="undefined";else if(v(t)||y(t))n=t.toString();else if(R(t))n=`[${u(t,Q).join(", ")}]`;else if(C(t))n=`$(${u(t,Q).join(", ")})`;else if(E(t)){n=`<${t.tagName.toLowerCase()}`;for(let e of["id","up-id","name","class"]){let r=t.getAttribute(e);r&&(n+=` ${e}="${r}"`)}n+=">"}else if(S(t)||t instanceof Error)n=t.toString();else try{n=JSON.stringify(t)}catch(t){if("TypeError"!==t.name)throw t;n="(circular structure)"}return n.length>200&&(n=`${n.substr(0,200)}â€¦${H(n)}`),n}const Y=/%[oOdisfc]/g;function Z(t){return function(...e){return!t(...e)}}function tt(t){if(t.error)throw t.error;return t.value}function et(t,e,n){try{return{value:t.apply(e,n)}}catch(t){return{error:t}}}return{parseURL:o,normalizeURL:n,matchURLs:function(t,e){return n(t)===n(e)},normalizeMethod:function(t){return t?t.toUpperCase():"GET"},methodAllowsPayload:function(t){return"GET"!==t&&"HEAD"!==t},copy:A,copyArrayLike:O,merge:L,mergeDefined:function(...t){const e={};for(let n of t)if(n)for(let t in n){const r=n[t];h(r)&&(e[t]=r)}return e},options:T,parseArgIntoOptions:function(t,e){let n=V(t);return h(t[0])&&(n=A(n),n[e]=t[0]),n},each:l,map:u,flatMap:function(t,e){return W(u(t,e))},mapObject:function(t,e){return u(t,e).reduce((function(t,e){return t[e[0]]=e[1],t}),{})},findResult:P,some:function(t,e){return!!P(t,e)},every:q,find:function(t,e){let n;e=a(e);for(let r of t)if(e(r)){n=r;break}return n},filter:M,filterMap:function(t,e){return M(u(t,e),h)},reject:function(t,e){return M(t,e=Z(a(e)))},intersect:function(t,e){return M(t,(t=>N(e,t)))},compact:D,compactObject:function(t){return B(t,f)},uniq:function(t){return t.length<2?t:Array.from(new Set(t))},uniqBy:function(t,e){if(t.length<2)return t;e=a(e);const n=new Set;return M(t,(function(t,r){const i=e(t,r);return!n.has(i)&&(n.add(i),!0)}))},last:H,isNull:c,isDefined:h,isUndefined:p,isGiven:f,isMissing:d,isPresent:g,isBlank:m,presence:function(t,e=g){if(e(t))return t},isObject:k,isFunction:y,isString:b,isBoolean:function(t){return"boolean"==typeof t||t instanceof Boolean},isNumber:v,isElement:E,isJQuery:C,isElementish:function(t){return!(!t||!t.addEventListener&&!t[0]?.addEventListener)},isPromise:function(t){return k(t)&&y(t.then)},isOptions:w,isArray:R,isFormData:function(t){return t instanceof FormData},isList:x,isRegExp:S,timer:function(t,e){return setTimeout(e,t)},contains:N,objectContains:function(t,e){return _(e,j(t,Object.keys(e)))},toArray:function(t){return R(t)?t:O(t)},pick:j,pickBy:B,omit:function(t,e){return B(t,((t,n)=>!N(e,n)))},unresolvablePromise:function(){return new Promise(t)},remove:function(t,e){const n=t.indexOf(e);if(n>=0)return t.splice(n,1),e},memoize:function(t){let e,n;return function(...r){return n?e:(n=!0,e=t.apply(this,r))}},pluckKey:K,renameKey:function(t,e,n){return t[n]=K(t,e)},extractOptions:V,extractCallback:function(t){return z(t,y)},noop:t,asyncNoop:function(){return Promise.resolve()},identity:I,escapeHTML:function(t){return t.replace(/[&<>"']/g,(t=>U[t]))},escapeRegExp:function(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")},sequence:function(t){return t=D(t),(...e)=>u(t,(t=>t(...e)))},evalOption:$,evalAutoOption:function(t,e,...n){return"auto"===(t=$(t,...n))&&(t=$(e,...n)),t},flatten:W,newDeferred:function(){let t,e;const n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n},always:function(t,e=I){return t.then(e,e)},isBasicObjectProperty:function(t){return Object.prototype.hasOwnProperty(t)},isCrossOrigin:s,task:function(t){return setTimeout(t)},microtask:function(t){return Promise.resolve().then(t)},isEqual:_,parseTokens:function(t,e={}){if(b(t)){if(t=t.trim(),e.json&&/^\[.*]$/.test(t))return JSON.parse(t);{let n=e.separator||"space/or",r=G[n];return t.split(r)}}return F(t)},wrapList:F,wrapValue:function(t,...e){return e[0]instanceof t?e[0]:new t(...e)},uid:function(){return J++},upperCaseFirst:function(t){return t[0].toUpperCase()+t.slice(1)},lowerCaseFirst:function(t){return t[0].toLowerCase()+t.slice(1)},getter:function(t,e,n){Object.defineProperty(t,e,{get:n})},delegate:function(t,e,n){for(let r of e)Object.defineProperty(t,r,{get(){const t=n.call(this);let e=t[r];return y(e)&&(e=e.bind(t)),e},set(t){n.call(this)[r]=t}})},reverse:function(t){return A(t).reverse()},camelToKebabCase:function(t){return t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))},nullToUndefined:function(t){if(!c(t))return t},sprintf:function(t,...e){return t.replace(Y,(t=>Q(e.shift(),t)))},renameKeys:function(t,e){const n={};for(let r in t)n[e(r)]=t[r];return n},negate:Z,memoizeMethod:function(t,e){for(let n of F(e)){let e=t[n];t[n]=function(...t){var r;let i=this[r=`__${n}MemoizeCache`]||(this[r]={}),s=JSON.stringify(t);return i[s]||(i[s]=et(e,this,t)),tt(i[s])}}},safeStringifyJSON:function(t){return JSON.stringify(t).replace(/[^\x00-\x7F]/g,(t=>"\\u"+t.charCodeAt(0).toString(16).padStart(4,"0")))},variant:function(t,e={}){let n=Object.create(t);return Object.assign(n,e),n}}}()},4606:(t,e,n)=>{n(5074),up.viewport=function(){const t=up.util,e=up.element,n=up.fragment,r=new up.Config((()=>({viewportSelectors:["[up-viewport]","[up-fixed]"],fixedTop:["[up-fixed~=top]"],fixedBottom:["[up-fixed~=bottom]"],anchoredRight:["[up-anchored~=right]","[up-fixed~=top]","[up-fixed~=bottom]","[up-fixed~=right]"],revealSnap:200,revealPadding:0,revealTop:!1,revealMax:()=>.5*window.innerHeight})));function i(e,r){return r=t.options(r),e=n.get(e,r),(r.layer=up.layer.get(e))||up.fail("Cannot reveal a detached element"),r.peel&&r.layer.peel(),new up.RevealMotion(e,r).start(),up.migrate.formerlyAsync?.("up.reveal()")||!0}function s(t,e={}){if(e.force&&function(t){t.hasAttribute("tabindex")||-1!==t.tabIndex||(t.setAttribute("tabindex","-1"),t.classList.add("up-focusable-content"))}(t),t.focus({preventScroll:!0}),!e.preventScroll)return i(t)}function o(t=location.hash,e){let n=g(t,e);if(n)return up.reveal(n,{top:!0})}function a(){return[c().tagName,...r.viewportSelectors].join(",")}function u(t,e={}){return n.get(t,e).closest(a())}function l(t,r={}){return t=n.get(t,r),e.around(t,a())}function c(){return document.scrollingElement}function p(t){const n=e.style(t,"overflow-y");return"auto"===n||"scroll"===n}const h=t.memoize((function(){const t=up.element.affix(document.body,"[up-viewport]",{style:{position:"absolute",top:"0",left:"0",width:"100px",height:"100px",overflowY:"scroll"}}),e=t.offsetWidth-t.clientWidth;return t.remove(),e}));function d(t){return up.fragment.tryToTarget(t)}function f(e){const r=t.copy(t.extractOptions(e));let i;return r.layer=up.layer.get(r),i=e[0]?[u(e[0],r)]:r.around?l(r.around,r):function(t={}){return n.all(a(),t)}(r),[i,r]}function m(t,e){for(let n of t){const t=d(n);n.scrollTop=e[t]||0}}function g(t,r={}){if(i=t,t=i?.replace(/^#/,"")){const i=[e.attrSelector("id",t),"a"+e.attrSelector("name",t)].join(",");return n.get(i,r)}var i}const y=["selectionStart","selectionEnd","scrollLeft","scrollTop"];let b=!1;return up.on("scroll",{once:!0,beforeBoot:!0},(()=>b=!0)),up.on("up:framework:boot",(function(){t.task((function(){if(!b)return o()}))})),up.on(window,"hashchange",(()=>o())),up.on("up:framework:reset",(function(){r.reset()})),{reveal:i,revealHash:o,firstHashTarget:g,config:r,get:u,subtree:function(t,r={}){return t=n.get(t,r),e.subtree(t,a())},around:l,get root(){return c()},rootWidth:function(){return e.root.clientWidth},rootHeight:function(){return e.root.clientHeight},rootHasReducedWidthFromScrollbar:function(){return window.innerWidth>document.documentElement.offsetWidth},rootOverflowElement:function(){const{body:e}=document,n=document.documentElement;return t.find([n,e],p)||c()},isRoot:function(t){return t===c()},scrollbarWidth:h,saveScroll:function(...t){const[e,n]=f(t),r=n.location||n.layer.location;if(r){const t=function(t){let e={};for(let n of t){let t=d(n);t?e[t]=n.scrollTop:up.warn("up.viewport.saveScroll()","Cannot save scroll positions for untargetable viewport %o",n)}return e}(e);n.layer.lastScrollTops.set(r,t)}},restoreScroll:function(...t){const[e,n]=f(t),{location:r}=n.layer,i=n.layer.lastScrollTops.get(r);return!!i&&(m(e,i),up.puts("up.viewport.restoreScroll()","Restored scroll positions to %o",i),!0)},resetScroll:function(...t){const[e,n]=f(t);m(e,{})},saveFocus:function(t={}){const e=up.layer.get(t),n=t.location||e.location;if(n){const t=up.FocusCapsule.preserve(e);e.lastFocusCapsules.set(n,t)}},restoreFocus:function(t={}){const e=up.layer.get(t),n=t.location||e.location,r=t.layer.lastFocusCapsules.get(n);return!(!r||!r.restore(e)||(up.puts("up.viewport.restoreFocus()",'Restored focus to "%s"',r.target),0))},anchoredRight:function(){const t=r.anchoredRight.join(",");return n.all(t,{layer:"root"})},absolutize:function(n,i={}){const s=u(n).getBoundingClientRect(),o=n.getBoundingClientRect(),a=new up.Rect({left:o.left-s.left,top:o.top-s.top,width:o.width,height:o.height});i.afterMeasure?.(),e.setStyle(n,{position:"static"===n.style.position?"static":"relative",top:"auto",right:"auto",bottom:"auto",left:"auto",width:"100%",height:"100%"});const l=e.createFromSelector("up-bounds");e.insertBefore(n,l),l.appendChild(n);const c=function(t,n){return a.left+=t,a.top+=n,e.setStyle(l,a)};c(0,0);const p=n.getBoundingClientRect();return c(o.left-p.left,o.top-p.top),t.each(function(t=document){const e=["[up-fixed]"].concat(r.fixedTop).concat(r.fixedBottom);return t.querySelectorAll(e.join(","))}(n),e.fixedToAbsolute),{bounds:l,moveBounds:c}},focus:s,tryFocus:function(t,e){return s(t,e),t===document.activeElement},newStateCache:function(){return new up.FIFOCache({capacity:30,normalizeKey:up.history.normalizeURL})},focusedElementWithin:function(t){const e=document.activeElement;if(up.fragment.contains(t,e))return e},copyCursorProps:function(t,e={}){for(let n of y)try{e[n]=t[n]}catch(t){}return e}}}(),up.focus=up.viewport.focus,up.reveal=up.viewport.reveal},3507:()=>{window.up={version:"3.3.0"}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(3507),n(8374),n(7924),n(3924),n(6535),n(2811),n(9675),n(376),n(8272),n(4366),n(5485),n(8010),n(4861),n(3469),n(4504),n(2406),n(3742),n(1653),n(5949),n(1279),n(6346),n(3030),n(7948),n(2714),n(1752),n(8228),n(7050),n(9441),n(9489),n(7422),n(2200),n(278),n(9005),n(1569),n(2737),n(3635),n(1906),n(4158),n(3139),n(2214),n(5240),n(665),n(2828),n(2587),n(7031),n(8057),n(4850),n(7956),n(7403),n(6412),n(7965),n(7771),n(86),n(4552),n(5580),n(7101),n(6066),n(6387),n(5390),n(2618),n(7792),n(4308),n(1104),n(8665),n(3645),n(7782),n(2705),n(606),n(5437),n(7974),n(6413),n(5221),n(2298),n(4517),n(7241),n(2723),n(8720),n(7885),n(4818),n(9634),n(8670),n(3535),n(4453),n(2514),n(8944),n(2667),n(4606),n(4034),n(1647),n(9443),n(3849),n(2851),n(454),n(9615),n(6774),up.framework.onEvaled()})();